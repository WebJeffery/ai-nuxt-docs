---
title: å¼€å‘å·¥ä½œæµ
description: æ„å»ºç°ä»£åŒ–çš„Nuxt3å¼€å‘å·¥ä½œæµï¼ŒæŒæ¡ä¼ä¸šçº§å¼€å‘å·¥å…·é“¾ã€å›¢é˜Ÿåä½œå’ŒæŒç»­é›†æˆæœ€ä½³å®è·µ
icon: 'lucide:workflow'
---

## ğŸ¯ ç°ä»£åŒ–å¼€å‘å·¥ä½œæµæ¦‚è§ˆ

é«˜æ•ˆçš„å¼€å‘å·¥ä½œæµæ˜¯ä¼ä¸šçº§é¡¹ç›®æˆåŠŸçš„å…³é”®ã€‚æœ¬æŒ‡å—å°†å¸®ä½ æ„å»ºä¸€å¥—å®Œæ•´çš„Nuxt3å¼€å‘å·¥ä½œæµï¼ŒåŒ…æ‹¬ä»£ç è´¨é‡ä¿éšœã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€æŒç»­é›†æˆéƒ¨ç½²ç­‰å…³é”®ç¯èŠ‚ã€‚

::alert{icon="lucide:info" color="blue"}
**ç°ä»£åŒ–å·¥ä½œæµçš„æ ¸å¿ƒä»·å€¼**
- ğŸ”„ **è‡ªåŠ¨åŒ–**: å‡å°‘æ‰‹åŠ¨æ“ä½œï¼Œæé«˜å¼€å‘æ•ˆç‡
- ğŸ›¡ï¸ **è´¨é‡ä¿éšœ**: é€šè¿‡å·¥å…·é“¾ç¡®ä¿ä»£ç è´¨é‡
- ğŸ¤ **å›¢é˜Ÿåä½œ**: ç»Ÿä¸€çš„å¼€å‘è§„èŒƒå’Œæµç¨‹
- ğŸš€ **å¿«é€Ÿäº¤ä»˜**: æŒç»­é›†æˆå’Œè‡ªåŠ¨åŒ–éƒ¨ç½²
- ğŸ“Š **å¯è§‚æµ‹æ€§**: å®Œå–„çš„ç›‘æ§å’Œæ—¥å¿—ç³»ç»Ÿ
::

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒé…ç½®

### IDE é…ç½® (VS Code)

::code-group
```json [.vscode/settings.json]
{
  // åŸºç¡€è®¾ç½®
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true,
    "source.organizeImports": true
  },
  "editor.defaultFormatter": "esbenp.prettier-vscode",

  // TypeScript è®¾ç½®
  "typescript.preferences.importModuleSpecifier": "relative",
  "typescript.suggest.autoImports": true,
  "typescript.updateImportsOnFileMove.enabled": "always",

  // Vue è®¾ç½®
  "vue.codeActions.enabled": true,
  "vue.complete.normalizeComponentImportName": true,

  // Tailwind CSS è®¾ç½®
  "tailwindCSS.experimental.classRegex": [
    ["clsx\\(([^)]*)\\)", "(?:'|\"|`)([^']*)(?:'|\"|`)"],
    ["cva\\(([^)]*)\\)", "[\"'`]([^\"'`]*).*?[\"'`]"]
  ],

  // æ–‡ä»¶å…³è”
  "files.associations": {
    "*.vue": "vue",
    "*.md": "markdown"
  },

  // æ’é™¤æ–‡ä»¶
  "files.exclude": {
    "**/.nuxt": true,
    "**/.output": true,
    "**/node_modules": true,
    "**/dist": true
  },

  // æœç´¢è®¾ç½®
  "search.exclude": {
    "**/.nuxt": true,
    "**/.output": true,
    "**/node_modules": true,
    "**/pnpm-lock.yaml": true
  }
}
```

```json [.vscode/extensions.json]
{
  "recommendations": [
    // Vue ç›¸å…³
    "Vue.volar",
    "Vue.vscode-typescript-vue-plugin",

    // TypeScript ç›¸å…³
    "ms-vscode.vscode-typescript-next",

    // ä»£ç è´¨é‡
    "esbenp.prettier-vscode",
    "dbaeumer.vscode-eslint",
    "streetsidesoftware.code-spell-checker",

    // Tailwind CSS
    "bradlc.vscode-tailwindcss",

    // Git ç›¸å…³
    "eamodio.gitlens",
    "GitHub.vscode-pull-request-github",

    // å®ç”¨å·¥å…·
    "ms-vscode.vscode-json",
    "redhat.vscode-yaml",
    "ms-vscode.theme-materialkit",
    "PKief.material-icon-theme",

    // Nuxt ç›¸å…³
    "Nuxt.mdc",
    "antfu.iconify"
  ]
}
```

```json [.vscode/launch.json]
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Nuxt: Debug Server",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/node_modules/nuxi/bin/nuxi.mjs",
      "args": ["dev"],
      "console": "integratedTerminal",
      "env": {
        "NODE_ENV": "development"
      }
    },
    {
      "name": "Nuxt: Debug Client",
      "type": "chrome",
      "request": "launch",
      "url": "http://localhost:3000",
      "webRoot": "${workspaceFolder}"
    }
  ]
}
```
::

### Git é…ç½®

::code-group
```bash [.gitignore]
# Nuxt ç›¸å…³
.nuxt
.output
.nitro
.cache

# ä¾èµ–
node_modules
.pnpm-store

# æ—¥å¿—
*.log*
logs

# è¿è¡Œæ—¶
.DS_Store
Thumbs.db

# ç¯å¢ƒå˜é‡
.env
.env.*
!.env.example

# IDE
.vscode/settings.json
.idea

# æµ‹è¯•
coverage
.nyc_output

# æ„å»ºäº§ç‰©
dist
build

# ä¸´æ—¶æ–‡ä»¶
*.tmp
*.temp
.temp
```

```bash [.gitmessage]
# <type>(<scope>): <subject>
#
# <body>
#
# <footer>

# Type:
# feat: æ–°åŠŸèƒ½
# fix: ä¿®å¤bug
# docs: æ–‡æ¡£æ›´æ–°
# style: ä»£ç æ ¼å¼è°ƒæ•´
# refactor: ä»£ç é‡æ„
# perf: æ€§èƒ½ä¼˜åŒ–
# test: æµ‹è¯•ç›¸å…³
# chore: æ„å»ºè¿‡ç¨‹æˆ–å·¥å…·å˜åŠ¨
#
# Scope: å½±å“èŒƒå›´ (components, utils, api, etc.)
# Subject: ç®€çŸ­æè¿° (50å­—ç¬¦ä»¥å†…)
# Body: è¯¦ç»†æè¿°
# Footer: å…³è”issueæˆ–é‡å¤§å˜æ›´
```

```yaml [.github/PULL_REQUEST_TEMPLATE.md]
## ğŸ“ å˜æ›´è¯´æ˜

### å˜æ›´ç±»å‹
- [ ] ğŸ†• æ–°åŠŸèƒ½ (feat)
- [ ] ğŸ› Bugä¿®å¤ (fix)
- [ ] ğŸ“š æ–‡æ¡£æ›´æ–° (docs)
- [ ] ğŸ¨ ä»£ç æ ¼å¼ (style)
- [ ] â™»ï¸ ä»£ç é‡æ„ (refactor)
- [ ] âš¡ æ€§èƒ½ä¼˜åŒ– (perf)
- [ ] âœ… æµ‹è¯•ç›¸å…³ (test)
- [ ] ğŸ”§ æ„å»ºé…ç½® (chore)

### è¯¦ç»†æè¿°
è¯·è¯¦ç»†æè¿°ä½ çš„å˜æ›´å†…å®¹...

### æµ‹è¯•
- [ ] æ·»åŠ äº†ç›¸åº”çš„æµ‹è¯•
- [ ] é€šè¿‡äº†æ‰€æœ‰ç°æœ‰æµ‹è¯•
- [ ] æ‰‹åŠ¨æµ‹è¯•é€šè¿‡

### éƒ¨ç½²æ³¨æ„äº‹é¡¹
- [ ] éœ€è¦æ•°æ®åº“è¿ç§»
- [ ] éœ€è¦ç¯å¢ƒå˜é‡æ›´æ–°
- [ ] éœ€è¦ä¾èµ–æ›´æ–°

### ç›¸å…³é“¾æ¥
- Issues: #
- Documentation:
- Deploy Preview:
```
::

## ğŸ”§ ä»£ç è´¨é‡ä¿éšœ

### ESLint é…ç½®

::code-group
```javascript [eslint.config.js]
import antfu from '@antfu/eslint-config';

export default antfu(
  {
    // åŸºç¡€é…ç½®
    vue: true,
    typescript: true,
    formatters: true,

    // æ ·å¼ç›¸å…³
    stylistic: {
      indent: 2,
      quotes: 'single',
      semi: false
    },

    // å¿½ç•¥æ–‡ä»¶
    ignores: [
      '.nuxt',
      '.output',
      'dist',
      'node_modules'
    ]
  },

  // è‡ªå®šä¹‰è§„åˆ™
  {
    rules: {
      // Vue ç›¸å…³è§„åˆ™
      'vue/multi-word-component-names': 'off',
      'vue/no-multiple-template-root': 'off',
      'vue/component-name-in-template-casing': ['error', 'PascalCase'],
      'vue/component-definition-name-casing': ['error', 'PascalCase'],

      // TypeScript ç›¸å…³è§„åˆ™
      '@typescript-eslint/no-unused-vars': ['error', {
        argsIgnorePattern: '^_',
        varsIgnorePattern: '^_'
      }],
      '@typescript-eslint/consistent-type-imports': ['error', {
        prefer: 'type-imports',
        disallowTypeAnnotations: false
      }],

      // é€šç”¨è§„åˆ™
      'no-console': ['warn', { allow: ['warn', 'error'] }],
      'prefer-const': 'error',
      'object-shorthand': 'error',
      'prefer-template': 'error'
    }
  },

  // ç‰¹å®šæ–‡ä»¶è§„åˆ™
  {
    files: ['server/**/*.ts'],
    rules: {
      'no-console': 'off' // æœåŠ¡ç«¯å…è®¸ä½¿ç”¨console
    }
  },

  {
    files: ['**/*.test.ts', '**/*.spec.ts'],
    rules: {
      '@typescript-eslint/no-explicit-any': 'off' // æµ‹è¯•æ–‡ä»¶å…è®¸any
    }
  }
);
```

```json [package.json - scripts]
{
  "scripts": {
    "lint": "eslint .",
    "lint:fix": "eslint . --fix",
    "type-check": "vue-tsc --noEmit",
    "format": "prettier --write .",
    "format:check": "prettier --check ."
  }
}
```
::

### Prettier é…ç½®

```json [.prettierrc]
{
  "semi": false,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5",
  "printWidth": 100,
  "bracketSpacing": true,
  "arrowParens": "avoid",
  "vueIndentScriptAndStyle": false,
  "endOfLine": "lf",
  "plugins": ["prettier-plugin-tailwindcss"]
}
```

### Husky å’Œ lint-staged

::code-group
```json [package.json - huskyé…ç½®]
{
  "scripts": {
    "prepare": "husky install"
  },
  "lint-staged": {
    "*.{js,jsx,ts,tsx,vue}": [
      "eslint --fix",
      "prettier --write"
    ],
    "*.{css,scss,less,html,json,md}": [
      "prettier --write"
    ]
  }
}
```

```bash [.husky/pre-commit]
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# è¿è¡Œlint-staged
pnpm lint-staged

# ç±»å‹æ£€æŸ¥
pnpm type-check
```

```bash [.husky/commit-msg]
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# æäº¤ä¿¡æ¯éªŒè¯
pnpm dlx commitlint --edit "$1"
```
::

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯• (Vitest)

::code-group
```typescript [vitest.config.ts]
import { resolve } from 'node:path';
import { defineConfig } from 'vitest/config';

export default defineConfig({
  test: {
    environment: 'happy-dom',
    globals: true,
    setupFiles: ['./tests/setup.ts'],
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      exclude: [
        'node_modules/',
        '.nuxt/',
        '.output/',
        'tests/',
        '**/*.d.ts',
        '**/*.config.*',
        '**/coverage/**'
      ],
      thresholds: {
        global: {
          branches: 80,
          functions: 80,
          lines: 80,
          statements: 80
        }
      }
    }
  },
  resolve: {
    alias: {
      '@': resolve(__dirname, '.'),
      '~': resolve(__dirname, '.')
    }
  }
});
```

```typescript [tests/setup.ts]
import { vi } from 'vitest';

// Mock Nuxt ç»„åˆå¼å‡½æ•°
vi.mock('#app', () => ({
  useNuxtApp: () => ({
    $fetch: vi.fn(),
    ssrContext: undefined
  }),
  useRouter: () => ({
    push: vi.fn(),
    replace: vi.fn(),
    back: vi.fn()
  }),
  useRoute: () => ({
    params: {},
    query: {},
    path: '/'
  }),
  navigateTo: vi.fn(),
  useState: vi.fn(),
  useCookie: vi.fn()
}));

// å…¨å±€æµ‹è¯•é…ç½®
global.IntersectionObserver = vi.fn(() => ({
  disconnect: vi.fn(),
  observe: vi.fn(),
  unobserve: vi.fn()
}));
```

```typescript [tests/components/UserCard.test.ts]
import type { User } from '@/types';
import { mount } from '@vue/test-utils';
import { describe, expect, it, vi } from 'vitest';
import UserCard from '@/components/UserCard.vue';

const mockUser: User = {
  id: 1,
  name: 'John Doe',
  email: 'john@example.com',
  role: 'user',
  createdAt: new Date(),
  updatedAt: new Date()
};

describe('UserCard', () => {
  it('æ¸²æŸ“ç”¨æˆ·ä¿¡æ¯', () => {
    const wrapper = mount(UserCard, {
      props: {
        user: mockUser
      }
    });

    expect(wrapper.text()).toContain(mockUser.name);
    expect(wrapper.text()).toContain(mockUser.email);
  });

  it('ç‚¹å‡»ç¼–è¾‘æŒ‰é’®è§¦å‘äº‹ä»¶', async () => {
    const wrapper = mount(UserCard, {
      props: {
        user: mockUser,
        editable: true
      }
    });

    await wrapper.find('[data-testid="edit-button"]').trigger('click');

    expect(wrapper.emitted('edit')).toBeTruthy();
    expect(wrapper.emitted('edit')?.[0]).toEqual([mockUser]);
  });

  it('ä¸å¯ç¼–è¾‘æ—¶éšè—ç¼–è¾‘æŒ‰é’®', () => {
    const wrapper = mount(UserCard, {
      props: {
        user: mockUser,
        editable: false
      }
    });

    expect(wrapper.find('[data-testid="edit-button"]').exists()).toBe(false);
  });
});
```
::

### E2Eæµ‹è¯• (Playwright)

::code-group
```typescript [tests/e2e/auth.spec.ts]
import { expect, test } from '@playwright/test';

test.describe('ç”¨æˆ·è®¤è¯', () => {
  test('ç”¨æˆ·ç™»å½•æµç¨‹', async ({ page }) => {
    // è®¿é—®ç™»å½•é¡µé¢
    await page.goto('/login');

    // æ£€æŸ¥é¡µé¢å…ƒç´ 
    await expect(page.getByRole('heading', { name: 'ç™»å½•' })).toBeVisible();

    // å¡«å†™ç™»å½•è¡¨å•
    await page.getByLabel('é‚®ç®±').fill('test@example.com');
    await page.getByLabel('å¯†ç ').fill('password123');

    // æäº¤è¡¨å•
    await page.getByRole('button', { name: 'ç™»å½•' }).click();

    // éªŒè¯ç™»å½•æˆåŠŸ
    await expect(page).toHaveURL('/dashboard');
    await expect(page.getByText('æ¬¢è¿å›æ¥')).toBeVisible();
  });

  test('ç™»å½•å¤±è´¥å¤„ç†', async ({ page }) => {
    await page.goto('/login');

    // ä½¿ç”¨é”™è¯¯çš„å‡­è¯
    await page.getByLabel('é‚®ç®±').fill('invalid@example.com');
    await page.getByLabel('å¯†ç ').fill('wrongpassword');
    await page.getByRole('button', { name: 'ç™»å½•' }).click();

    // éªŒè¯é”™è¯¯æ¶ˆæ¯
    await expect(page.getByText('ç™»å½•å¤±è´¥')).toBeVisible();
    await expect(page).toHaveURL('/login');
  });
});
```

```typescript [tests/e2e/ai-chat.spec.ts]
import { expect, test } from '@playwright/test';

test.describe('AIèŠå¤©åŠŸèƒ½', () => {
  test.beforeEach(async ({ page }) => {
    // ç™»å½•å¹¶è®¿é—®èŠå¤©é¡µé¢
    await page.goto('/login');
    await page.getByLabel('é‚®ç®±').fill('test@example.com');
    await page.getByLabel('å¯†ç ').fill('password123');
    await page.getByRole('button', { name: 'ç™»å½•' }).click();
    await page.goto('/chat');
  });

  test('å‘é€æ¶ˆæ¯å¹¶æ¥æ”¶å›å¤', async ({ page }) => {
    // å‘é€æ¶ˆæ¯
    const messageInput = page.getByPlaceholder('è¾“å…¥æ¶ˆæ¯...');
    await messageInput.fill('ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹Nuxt3');
    await page.getByRole('button', { name: 'å‘é€' }).click();

    // æ£€æŸ¥æ¶ˆæ¯æ˜¾ç¤º
    await expect(page.getByText('ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹Nuxt3')).toBeVisible();

    // ç­‰å¾…AIå›å¤
    await expect(page.getByText('æ­£åœ¨æ€è€ƒ...')).toBeVisible();
    await expect(page.getByText('æ­£åœ¨æ€è€ƒ...')).toBeHidden({ timeout: 30000 });

    // éªŒè¯å›å¤å†…å®¹
    await expect(page.locator('[data-testid="ai-message"]').last()).toBeVisible();
  });

  test('æ¸…ç©ºå¯¹è¯å†å²', async ({ page }) => {
    // å‘é€ä¸€æ¡æ¶ˆæ¯
    await page.getByPlaceholder('è¾“å…¥æ¶ˆæ¯...').fill('æµ‹è¯•æ¶ˆæ¯');
    await page.getByRole('button', { name: 'å‘é€' }).click();

    // æ¸…ç©ºå¯¹è¯
    await page.getByRole('button', { name: 'æ¸…ç©ºå¯¹è¯' }).click();

    // ç¡®è®¤æ¸…ç©º
    await page.getByRole('button', { name: 'ç¡®è®¤' }).click();

    // éªŒè¯å¯¹è¯å·²æ¸…ç©º
    await expect(page.getByText('æµ‹è¯•æ¶ˆæ¯')).not.toBeVisible();
  });
});
```
::

## ğŸ“Š æ€§èƒ½ç›‘æ§

### æ€§èƒ½é¢„ç®—é…ç½®

```json [.lighthouserc.js]
module.exports = {
  ci: {
    collect: {
      url: ['http://localhost:3000/', 'http://localhost:3000/about'],
      numberOfRuns: 3
    },
    assert: {
      assertions: {
        'categories:performance': ['error', { minScore: 0.9 }],
        'categories:accessibility': ['error', { minScore: 0.9 }],
        'categories:best-practices': ['error', { minScore: 0.9 }],
        'categories:seo': ['error', { minScore: 0.9 }],
        'first-contentful-paint': ['error', { maxNumericValue: 2000 }],
        'largest-contentful-paint': ['error', { maxNumericValue: 2500 }],
        'cumulative-layout-shift': ['error', { maxNumericValue: 0.1 }]
      }
    },
    upload: {
      target: 'temporary-public-storage'
    }
  }
}
```

### Bundle åˆ†æ

```typescript [nuxt.config.ts - æ€§èƒ½é…ç½®]
export default defineNuxtConfig({
  // æ„å»ºä¼˜åŒ–
  build: {
    analyze: process.env.ANALYZE === 'true'
  },

  // Nitro ä¼˜åŒ–
  nitro: {
    compressPublicAssets: true,
    minify: true,
    experimental: {
      wasm: true
    }
  },

  // æ€§èƒ½ç›‘æ§
  hooks: {
    'build:before': () => {
      console.log('ğŸ“Š å¼€å§‹æ„å»ºæ€§èƒ½åˆ†æ...');
    },
    'build:done': (builder) => {
      console.log('âœ… æ„å»ºå®Œæˆï¼Œæ£€æŸ¥æ€§èƒ½æŒ‡æ ‡');
    }
  }
});
```

## ğŸš€ CI/CD æµæ°´çº¿

### GitHub Actions å·¥ä½œæµ

::code-group
```yaml [.github/workflows/ci.yml]
name: CI Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

env:
  NODE_VERSION: '18'
  PNPM_VERSION: '8'

jobs:
  # ä»£ç è´¨é‡æ£€æŸ¥
  quality:
    name: Code Quality
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}

      - name: Setup pnpm
        uses: pnpm/action-setup@v2
        with:
          version: ${{ env.PNPM_VERSION }}

      - name: Cache dependencies
        uses: actions/cache@v3
        with:
          path: ~/.pnpm-store
          key: ${{ runner.os }}-pnpm-${{ hashFiles('**/pnpm-lock.yaml') }}

      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      - name: Type check
        run: pnpm type-check

      - name: Lint
        run: pnpm lint

      - name: Format check
        run: pnpm format:check

  # å•å…ƒæµ‹è¯•
  test:
    name: Unit Tests
    runs-on: ubuntu-latest
    needs: quality

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}

      - name: Setup pnpm
        uses: pnpm/action-setup@v2
        with:
          version: ${{ env.PNPM_VERSION }}

      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      - name: Run tests
        run: pnpm test --coverage

      - name: Upload coverage
        uses: codecov/codecov-action@v3
        with:
          file: ./coverage/coverage-final.json

  # E2Eæµ‹è¯•
  e2e:
    name: E2E Tests
    runs-on: ubuntu-latest
    needs: quality

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}

      - name: Setup pnpm
        uses: pnpm/action-setup@v2
        with:
          version: ${{ env.PNPM_VERSION }}

      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      - name: Install Playwright
        run: pnpm dlx playwright install

      - name: Build application
        run: pnpm build

      - name: Start application
        run: pnpm preview &

      - name: Wait for app
        run: sleep 10

      - name: Run E2E tests
        run: pnpm test:e2e

      - name: Upload test results
        uses: actions/upload-artifact@v3
        if: failure()
        with:
          name: playwright-report
          path: test-results/

  # æ„å»ºæµ‹è¯•
  build:
    name: Build Test
    runs-on: ubuntu-latest
    needs: [test, e2e]

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}

      - name: Setup pnpm
        uses: pnpm/action-setup@v2
        with:
          version: ${{ env.PNPM_VERSION }}

      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      - name: Build application
        run: pnpm build

      - name: Upload build artifacts
        uses: actions/upload-artifact@v3
        with:
          name: build-files
          path: .output/
```

```yaml [.github/workflows/deploy.yml]
name: Deploy to Production

on:
  push:
    branches: [main]
  workflow_run:
    workflows: [CI Pipeline]
    types: [completed]
    branches: [main]

jobs:
  deploy:
    name: Deploy to Vercel
    runs-on: ubuntu-latest
    if: ${{ github.event.workflow_run.conclusion == 'success' }}

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'

      - name: Setup pnpm
        uses: pnpm/action-setup@v2
        with:
          version: '8'

      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      - name: Build
        run: pnpm build
        env:
          NUXT_OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
          NUXT_DATABASE_URL: ${{ secrets.DATABASE_URL }}

      - name: Deploy to Vercel
        uses: vercel/action@v1
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
          vercel-args: --prod
```
::

## ğŸ“ˆ ç›‘æ§å’Œæ—¥å¿—

### åº”ç”¨ç›‘æ§é…ç½®

::code-group
```typescript [plugins/monitoring.client.ts]
import { defineNuxtPlugin } from '#app';

export default defineNuxtPlugin(() => {
  // æ€§èƒ½ç›‘æ§
  if (typeof window !== 'undefined') {
    // Web Vitals
    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {
      getCLS(console.log);
      getFID(console.log);
      getFCP(console.log);
      getLCP(console.log);
      getTTFB(console.log);
    });

    // é”™è¯¯ç›‘æ§
    window.addEventListener('error', (event) => {
      console.error('Global error:', event.error);
      // å‘é€åˆ°ç›‘æ§æœåŠ¡
    });

    window.addEventListener('unhandledrejection', (event) => {
      console.error('Unhandled promise rejection:', event.reason);
      // å‘é€åˆ°ç›‘æ§æœåŠ¡
    });
  }
});
```

```typescript [server/utils/logger.ts]
import { createConsola } from 'consola';

export const logger = createConsola({
  level: process.env.NODE_ENV === 'production' ? 2 : 4,
  formatOptions: {
    colors: true,
    date: true,
    compact: process.env.NODE_ENV === 'production'
  },
  reporters: [
    // æ§åˆ¶å°è¾“å‡º
    {
      log: (logObj) => {
        console.log(logObj.args.join(' '));
      }
    },

    // ç”Ÿäº§ç¯å¢ƒæ–‡ä»¶è¾“å‡º
    ...(process.env.NODE_ENV === 'production' ? [{
      log: (logObj) => {
        // å†™å…¥æ—¥å¿—æ–‡ä»¶æˆ–å‘é€åˆ°æ—¥å¿—æœåŠ¡
      }
    }] : [])
  ]
});

// æ€§èƒ½æ—¥å¿—
export const performanceLogger = {
  start: (label: string) => {
    console.time(label);
  },

  end: (label: string) => {
    console.timeEnd(label);
  },

  measure: async <T>(label: string, fn: () => Promise<T>): Promise<T> => {
    const start = Date.now();
    try {
      const result = await fn();
      const duration = Date.now() - start;
      logger.info(`${label} completed in ${duration}ms`);
      return result;
    } catch (error) {
      const duration = Date.now() - start;
      logger.error(`${label} failed after ${duration}ms:`, error);
      throw error;
    }
  }
};
```
::

## ğŸ¯ å›¢é˜Ÿåä½œè§„èŒƒ

### ä»£ç å®¡æŸ¥æ¸…å•

```markdown [docs/CODE_REVIEW.md]
# ä»£ç å®¡æŸ¥æ¸…å•

## ğŸ“‹ å®¡æŸ¥è¦ç‚¹

### ğŸ¯ åŠŸèƒ½æ€§
- [ ] åŠŸèƒ½æ˜¯å¦æŒ‰éœ€æ±‚æ­£ç¡®å®ç°ï¼Ÿ
- [ ] è¾¹ç•Œæ¡ä»¶æ˜¯å¦å¤„ç†å¾—å½“ï¼Ÿ
- [ ] é”™è¯¯å¤„ç†æ˜¯å¦å®Œå–„ï¼Ÿ

### ğŸ—ï¸ æ¶æ„è®¾è®¡
- [ ] ä»£ç ç»“æ„æ˜¯å¦æ¸…æ™°åˆç†ï¼Ÿ
- [ ] æ˜¯å¦éµå¾ªé¡¹ç›®çš„æ¶æ„æ¨¡å¼ï¼Ÿ
- [ ] ç»„ä»¶èŒè´£æ˜¯å¦å•ä¸€ï¼Ÿ

### ğŸ”’ å®‰å…¨æ€§
- [ ] ç”¨æˆ·è¾“å…¥æ˜¯å¦å¾—åˆ°éªŒè¯ï¼Ÿ
- [ ] æ•æ„Ÿä¿¡æ¯æ˜¯å¦å¾—åˆ°ä¿æŠ¤ï¼Ÿ
- [ ] APIæ¥å£æ˜¯å¦æœ‰é€‚å½“çš„æƒé™æ§åˆ¶ï¼Ÿ

### ğŸš€ æ€§èƒ½
- [ ] æ˜¯å¦å­˜åœ¨æ€§èƒ½ç“¶é¢ˆï¼Ÿ
- [ ] å›¾ç‰‡å’Œèµ„æºæ˜¯å¦ä¼˜åŒ–ï¼Ÿ
- [ ] æ•°æ®åº“æŸ¥è¯¢æ˜¯å¦é«˜æ•ˆï¼Ÿ

### ğŸ§ª æµ‹è¯•
- [ ] æ˜¯å¦æ·»åŠ äº†é€‚å½“çš„æµ‹è¯•ï¼Ÿ
- [ ] æµ‹è¯•è¦†ç›–ç‡æ˜¯å¦è¶³å¤Ÿï¼Ÿ
- [ ] æµ‹è¯•æ˜¯å¦å¯é ä¸”æ˜“ç»´æŠ¤ï¼Ÿ

### ğŸ“š æ–‡æ¡£
- [ ] å¤æ‚é€»è¾‘æ˜¯å¦æœ‰æ³¨é‡Šè¯´æ˜ï¼Ÿ
- [ ] APIæ–‡æ¡£æ˜¯å¦æ›´æ–°ï¼Ÿ
- [ ] READMEæ˜¯å¦éœ€è¦æ›´æ–°ï¼Ÿ

### ğŸ¨ ä»£ç é£æ ¼
- [ ] æ˜¯å¦éµå¾ªé¡¹ç›®çš„ç¼–ç è§„èŒƒï¼Ÿ
- [ ] å˜é‡å’Œå‡½æ•°å‘½åæ˜¯å¦æ¸…æ™°ï¼Ÿ
- [ ] ä»£ç æ˜¯å¦æ˜“äºç†è§£å’Œç»´æŠ¤ï¼Ÿ
```

### å‘å¸ƒæµç¨‹

```bash [scripts/release.sh]
#!/bin/bash

# å‘å¸ƒè„šæœ¬
set -e

# é¢œè‰²å®šä¹‰
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

echo -e "${GREEN}ğŸš€ å¼€å§‹å‘å¸ƒæµç¨‹...${NC}"

# æ£€æŸ¥å½“å‰åˆ†æ”¯
current_branch=$(git branch --show-current)
if [ "$current_branch" != "main" ]; then
  echo -e "${RED}âŒ è¯·åœ¨mainåˆ†æ”¯ä¸Šæ‰§è¡Œå‘å¸ƒ${NC}"
  exit 1
fi

# æ£€æŸ¥å·¥ä½œåŒºæ˜¯å¦å¹²å‡€
if [ -n "$(git status --porcelain)" ]; then
  echo -e "${RED}âŒ å·¥ä½œåŒºæœ‰æœªæäº¤çš„æ›´æ”¹${NC}"
  exit 1
fi

# æ‹‰å–æœ€æ–°ä»£ç 
echo -e "${YELLOW}ğŸ“¥ æ‹‰å–æœ€æ–°ä»£ç ...${NC}"
git pull origin main

# è¿è¡Œæµ‹è¯•
echo -e "${YELLOW}ğŸ§ª è¿è¡Œæµ‹è¯•å¥—ä»¶...${NC}"
pnpm test

# æ„å»ºé¡¹ç›®
echo -e "${YELLOW}ğŸ”¨ æ„å»ºé¡¹ç›®...${NC}"
pnpm build

# ç‰ˆæœ¬å·æå‡
echo -e "${YELLOW}ğŸ“ æ›´æ–°ç‰ˆæœ¬å·...${NC}"
pnpm changeset version
pnpm install

# æäº¤ç‰ˆæœ¬æ›´æ”¹
if [ -n "$(git status --porcelain)" ]; then
  git add .
  git commit -m "chore: release version"
fi

# åˆ›å»ºæ ‡ç­¾å¹¶æ¨é€
echo -e "${YELLOW}ğŸ·ï¸ åˆ›å»ºå‘å¸ƒæ ‡ç­¾...${NC}"
pnpm changeset tag
git push origin main --tags

# å‘å¸ƒåˆ°npm (å¦‚æœæ˜¯åŒ…)
# pnpm changeset publish

echo -e "${GREEN}âœ… å‘å¸ƒå®Œæˆï¼${NC}"
```

## ğŸ¯ æœ€ä½³å®è·µæ€»ç»“

::alert{icon="lucide:lightbulb" color="blue"}
### ğŸŒŸ å·¥ä½œæµä¼˜åŒ–å»ºè®®

1. **è‡ªåŠ¨åŒ–ä¼˜å…ˆ**: èƒ½è‡ªåŠ¨åŒ–çš„éƒ½åº”è¯¥è‡ªåŠ¨åŒ–
2. **æ—©æœŸé›†æˆ**: å°½æ—©å‘ç°å’Œè§£å†³é—®é¢˜
3. **æŒç»­åé¦ˆ**: å»ºç«‹å¿«é€Ÿçš„åé¦ˆå¾ªç¯
4. **è´¨é‡é—¨ç¦**: è®¾ç½®ä»£ç è´¨é‡å’Œæµ‹è¯•è¦†ç›–ç‡é—¨æ§›
5. **æ–‡æ¡£åŒæ­¥**: ç¡®ä¿æ–‡æ¡£ä¸ä»£ç åŒæ­¥æ›´æ–°
6. **ç›‘æ§å‘Šè­¦**: å»ºç«‹å®Œå–„çš„ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶
::

### å…³é”®æŒ‡æ ‡ç›‘æ§

```typescript [utils/metrics.ts]
// å…³é”®æ€§èƒ½æŒ‡æ ‡
export interface Metrics {
  // æ„å»ºæŒ‡æ ‡
  buildTime: number;
  bundleSize: number;

  // æµ‹è¯•æŒ‡æ ‡
  testCoverage: number;
  testPassRate: number;

  // éƒ¨ç½²æŒ‡æ ‡
  deploymentFrequency: number;
  leadTime: number;
  meanTimeToRecovery: number;
  changeFailureRate: number;

  // è´¨é‡æŒ‡æ ‡
  codeSmells: number;
  technicalDebt: number;
  duplicatedLines: number;
}

export function trackMetrics(metrics: Partial<Metrics>) {
  // å‘é€æŒ‡æ ‡åˆ°ç›‘æ§ç³»ç»Ÿ
  console.log('ğŸ“Š Metrics:', metrics);
}
```
