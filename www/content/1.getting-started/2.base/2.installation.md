---
title: é¡¹ç›®å¼€å‘ç¯å¢ƒæ­å»º
description: å…¨é¢çš„Nuxtä¼ä¸šçº§é¡¹ç›®å¼€å‘ç¯å¢ƒæ­å»ºæŒ‡å—ï¼Œæ¶µç›–å·¥å…·é“¾ã€CI/CDã€ç›‘æ§ã€æµ‹è¯•ç­‰å®Œæ•´æŠ€æœ¯æ ˆ
icon: 'lucide:settings'
---

## 1ã€é¡¹ç›®æ¦‚è¿°

ä¼ä¸šçº§ Nuxt é¡¹ç›®éœ€è¦è€ƒè™‘å¼€å‘æ•ˆç‡ã€ä»£ç è´¨é‡ã€æ€§èƒ½ä¼˜åŒ–ã€å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§ç­‰å¤šä¸ªæ–¹é¢ã€‚æœ¬æŒ‡å—ä»‹ç»å¦‚ä½•åšæŠ€æœ¯é€‰å‹ï¼Œå¹¶æ­å»ºä¸€ä¸ªå®Œæ•´çš„ä¼ä¸šçº§å¼€å‘ç¯å¢ƒã€‚

### 1.1 ä¸ºä»€ä¹ˆé€‰æ‹© Nuxt4ï¼Ÿ

**Nuxt4** æ˜¯åŸºäº Vue 3 çš„å…¨æ ˆæ¡†æ¶ï¼Œä¸“ä¸ºç°ä»£Webåº”ç”¨è€Œè®¾è®¡ï¼š

- **ğŸš€ æ€§èƒ½ä¼˜å¼‚**: å†…ç½® Vite æ„å»ºå·¥å…·ï¼Œå¼€å‘ä½“éªŒæä½³ï¼Œæ„å»ºé€Ÿåº¦å¿«
- **ğŸ”§ å¼€ç®±å³ç”¨**: é›¶é…ç½®å¯åŠ¨ï¼Œçº¦å®šä¼˜äºé…ç½®ï¼Œå‡å°‘æ ·æ¿ä»£ç 
- **ğŸŒ å…¨æ ˆèƒ½åŠ›**: å‰ç«¯+åç«¯ä¸€ä½“åŒ–å¼€å‘ï¼ŒNitro æœåŠ¡å™¨å¼•æ“å¼ºå¤§
- **ğŸ“± ç°ä»£åŒ–**: æ”¯æŒ SSRã€SSGã€SPA ç­‰å¤šç§æ¸²æŸ“æ¨¡å¼
- **ğŸ”’ ç±»å‹å®‰å…¨**: åŸç”Ÿ TypeScript æ”¯æŒï¼Œæ›´å¥½çš„å¼€å‘ä½“éªŒ
- **ğŸ¯ SEOå‹å¥½**: æœåŠ¡ç«¯æ¸²æŸ“ï¼Œæœç´¢å¼•æ“ä¼˜åŒ–æ•ˆæœå¥½

### 1.2 ä¼ä¸šçº§å¼€å‘çš„æ ¸å¿ƒéœ€æ±‚

::card-group{cols=2}
  ::::card{icon="lucide:users"}
  #title
  **å›¢é˜Ÿåä½œ**
  #description
  - ç»Ÿä¸€çš„ä»£ç è§„èŒƒå’Œé£æ ¼
  - è‡ªåŠ¨åŒ–çš„ä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–
  - ç‰ˆæœ¬æ§åˆ¶å’Œåˆ†æ”¯ç®¡ç†ç­–ç•¥
  - ä»£ç å®¡æŸ¥å’Œè´¨é‡æŠŠæ§
  ::::

  ::::card{icon="lucide:shield"}
  #title
  **è´¨é‡ä¿è¯**
  #description
  - å®Œæ•´çš„æµ‹è¯•è¦†ç›–ï¼ˆå•å…ƒã€é›†æˆã€E2Eï¼‰
  - ç±»å‹å®‰å…¨å’Œé”™è¯¯é¢„é˜²
  - æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–
  - å®‰å…¨æ€§é…ç½®å’Œæœ€ä½³å®è·µ
  ::::

  ::::card{icon="lucide:zap"}
  #title
  **å¼€å‘æ•ˆç‡**
  #description
  - çƒ­é‡è½½å’Œå¿«é€Ÿå¼€å‘åé¦ˆ
  - æ™ºèƒ½çš„IDEæ”¯æŒå’Œæç¤º
  - è‡ªåŠ¨åŒ–çš„æ„å»ºå’Œéƒ¨ç½²
  - å¼€å‘å·¥å…·å’Œè°ƒè¯•æ”¯æŒ
  ::::

  ::::card{icon="lucide:rocket"}
  #title
  **ç”Ÿäº§å°±ç»ª**
  #description
  - å®¹å™¨åŒ–éƒ¨ç½²å’Œæ‰©å±•
  - CI/CD æµæ°´çº¿è‡ªåŠ¨åŒ–
  - ç›‘æ§ã€æ—¥å¿—å’Œå‘Šè­¦
  - é«˜å¯ç”¨æ€§å’Œå®¹é”™å¤„ç†
  ::::
::

::alert{icon="lucide:info" color="blue"}
**é€‚ç”¨åœºæ™¯**: ä¸­å¤§å‹ä¼ä¸šã€å¤æ‚ä¸šåŠ¡ç³»ç»Ÿã€å¤šå›¢é˜Ÿåä½œã€é«˜å¯ç”¨æ€§è¦æ±‚çš„é¡¹ç›®
::

## 2ã€ æŠ€æœ¯æ ˆæ¦‚è§ˆ

### 2.1 æŠ€æœ¯æ ˆé€‰æ‹©åŸåˆ™

åœ¨ä¼ä¸šçº§é¡¹ç›®ä¸­ï¼ŒæŠ€æœ¯æ ˆçš„é€‰æ‹©è‡³å…³é‡è¦ã€‚æˆ‘ä»¬çš„é€‰æ‹©åŸºäºä»¥ä¸‹åŸåˆ™ï¼š

1. **ğŸ¯ æˆç†Ÿç¨³å®š**: é€‰æ‹©ç»è¿‡å¤§è§„æ¨¡ç”Ÿäº§éªŒè¯çš„æŠ€æœ¯
2. **ğŸš€ æ€§èƒ½ä¼˜å…ˆ**: ä¼˜å…ˆè€ƒè™‘è¿è¡Œæ—¶æ€§èƒ½å’Œå¼€å‘ä½“éªŒ
3. **ğŸ”§ ç”Ÿæ€å®Œå–„**: æ‹¥æœ‰ä¸°å¯Œçš„æ’ä»¶å’Œç¤¾åŒºæ”¯æŒ
4. **ğŸ‘¥ å›¢é˜Ÿé€‚é…**: ç¬¦åˆå›¢é˜ŸæŠ€æœ¯æ ˆå’Œå­¦ä¹ æ›²çº¿
5. **ğŸ”® æœªæ¥å¯¼å‘**: æŠ€æœ¯å‘å±•è¶‹åŠ¿å’Œé•¿æœŸç»´æŠ¤æ€§

### 2.2 æ ¸å¿ƒæŠ€æœ¯æ ˆ

::card-group{cols=2}
  ::::card{icon="lucide:layers"}
  #title
  **å‰ç«¯æ¡†æ¶**
  #description
  - **Nuxt4**: åŸºäºVue3çš„å…¨æ ˆæ¡†æ¶ï¼Œæä¾›SSR/SSGèƒ½åŠ›
  - **TypeScript 5.x**: é™æ€ç±»å‹æ£€æŸ¥ï¼Œæå‡ä»£ç è´¨é‡å’Œå¼€å‘ä½“éªŒ
  - **Tailwind CSS 3.x**: åŸå­åŒ–CSSæ¡†æ¶ï¼Œé«˜æ•ˆæ ·å¼å¼€å‘
  - **Pinia**: Vue3å®˜æ–¹æ¨èçš„çŠ¶æ€ç®¡ç†åº“ï¼Œæ›¿ä»£Vuex

  **ä¸ºä»€ä¹ˆé€‰æ‹©Vue3ç”Ÿæ€ï¼Ÿ**
  - ç»„åˆå¼APIæä¾›æ›´å¥½çš„é€»è¾‘å¤ç”¨å’Œä»£ç ç»„ç»‡
  - æ›´å°çš„åŒ…ä½“ç§¯å’Œæ›´å¥½çš„æ€§èƒ½
  - æ›´å¥½çš„TypeScriptæ”¯æŒ
  ::::

  ::::card{icon="lucide:server"}
  #title
  **æœåŠ¡ç«¯æ¸²æŸ“**
  #description
  - **Nitro æœåŠ¡å™¨å¼•æ“**: é«˜æ€§èƒ½æœåŠ¡å™¨è¿è¡Œæ—¶ï¼Œæ”¯æŒå¤šå¹³å°éƒ¨ç½²
  - **å…¨æ ˆ API å¼€å‘**: å‰åç«¯ä¸€ä½“åŒ–ï¼Œå‡å°‘å¼€å‘å¤æ‚åº¦
  - **è¾¹ç¼˜å‡½æ•°éƒ¨ç½²**: æ”¯æŒVercelã€Netlifyç­‰ç°ä»£éƒ¨ç½²å¹³å°
  - **æœåŠ¡ç«¯ç»„ä»¶**: åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“ç»„ä»¶ï¼Œå‡å°‘å®¢æˆ·ç«¯è´Ÿè½½

  **Nitroå¼•æ“ä¼˜åŠ¿ï¼š**
  - é›¶é…ç½®éƒ¨ç½²åˆ°ä»»ä½•å¹³å°
  - è‡ªåŠ¨ä»£ç æ‹†åˆ†å’Œä¼˜åŒ–
  - å†…ç½®ç¼“å­˜å’Œæ€§èƒ½ä¼˜åŒ–
  ::::

  ::::card{icon="lucide:database"}
  #title
  **æ•°æ®å±‚**
  #description
  - **Prisma ORM**: ç°ä»£æ•°æ®åº“å·¥å…·ï¼Œç±»å‹å®‰å…¨çš„æ•°æ®åº“è®¿é—®
  - **PostgreSQL / MySQL**: æˆç†Ÿçš„å…³ç³»å‹æ•°æ®åº“
  - **Redis ç¼“å­˜**: é«˜æ€§èƒ½å†…å­˜æ•°æ®åº“ï¼Œç”¨äºç¼“å­˜å’Œä¼šè¯å­˜å‚¨
  - **GraphQL API**: çµæ´»çš„APIæŸ¥è¯¢è¯­è¨€ï¼Œå‰ç«¯æŒ‰éœ€è·å–æ•°æ®

  **æ•°æ®å±‚æ¶æ„ä¼˜åŠ¿ï¼š**
  - Prismaæä¾›ç±»å‹å®‰å…¨çš„æ•°æ®åº“æ“ä½œ
  - æ•°æ®åº“è¿ç§»å’Œç‰ˆæœ¬ç®¡ç†
  - æŸ¥è¯¢ä¼˜åŒ–å’Œæ€§èƒ½ç›‘æ§
  ::::

  ::::card{icon="lucide:shield"}
  #title
  **è´¨é‡ä¿è¯**
  #description
  - **ESLint + Prettier**: ä»£ç è§„èŒƒæ£€æŸ¥å’Œè‡ªåŠ¨æ ¼å¼åŒ–
  - **Vitest å•å…ƒæµ‹è¯•**: åŸºäºViteçš„é«˜æ€§èƒ½æµ‹è¯•æ¡†æ¶
  - **Playwright E2Eæµ‹è¯•**: è·¨æµè§ˆå™¨ç«¯åˆ°ç«¯æµ‹è¯•
  - **SonarQube**: ä»£ç è´¨é‡å’Œå®‰å…¨æ€§æ‰«æ

  **è´¨é‡ä¿è¯ä½“ç³»ï¼š**
  - å¤šå±‚æ¬¡æµ‹è¯•è¦†ç›–ï¼ˆå•å…ƒã€é›†æˆã€E2Eï¼‰
  - è‡ªåŠ¨åŒ–ä»£ç è´¨é‡æ£€æŸ¥
  - æ€§èƒ½å’Œå®‰å…¨æ€§ç›‘æ§
  ::::
::

## 3ã€ç¯å¢ƒå‡†å¤‡

### 3.1 ç³»ç»Ÿè¦æ±‚

::alert{icon="lucide:cpu" color="yellow"}
**ä¼ä¸šçº§ç³»ç»Ÿè¦æ±‚**:
- CPU: 4æ ¸å¿ƒä»¥ä¸Š (æ¨è8æ ¸å¿ƒ)
- å†…å­˜: 16GBä»¥ä¸Š (æ¨è32GB)
- å­˜å‚¨: NVMe SSD 500GBä»¥ä¸Š
- ç½‘ç»œ: ç¨³å®šçš„ä¼ä¸šç½‘ç»œç¯å¢ƒ
::

### 3.2 å¼€å‘å·¥å…·å®‰è£…

#### 1. Node.js è¿è¡Œæ—¶ç¯å¢ƒ

**Node.js æ˜¯ä»€ä¹ˆï¼Ÿ**
Node.js æ˜¯åŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œæ—¶ç¯å¢ƒï¼Œè®© JavaScript å¯ä»¥è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯ã€‚å¯¹äº Nuxt4 é¡¹ç›®ï¼ŒNode.js æ˜¯å¿…éœ€çš„åŸºç¡€è¿è¡Œæ—¶ã€‚

**ä¸ºä»€ä¹ˆæ¨èä½¿ç”¨ NVMï¼Ÿ**
- **ç‰ˆæœ¬ç®¡ç†**: å¯ä»¥å®‰è£…å’Œåˆ‡æ¢å¤šä¸ª Node.js ç‰ˆæœ¬
- **é¡¹ç›®éš”ç¦»**: ä¸åŒé¡¹ç›®å¯ä»¥ä½¿ç”¨ä¸åŒçš„ Node.js ç‰ˆæœ¬
- **å›¢é˜Ÿåä½œ**: ç¡®ä¿å›¢é˜Ÿæˆå‘˜ä½¿ç”¨ç›¸åŒçš„ Node.js ç‰ˆæœ¬

```bash
# ä½¿ç”¨ Node Version Manager (æ¨è)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# é‡æ–°åŠ è½½ç»ˆç«¯é…ç½®
source ~/.bashrc

# å®‰è£…æœ€æ–°çš„ LTS ç‰ˆæœ¬
nvm install --lts
nvm use --lts
nvm alias default node

# éªŒè¯å®‰è£…
node --version  # v20.10.0+
npm --version   # v10.2.0+
```

::alert{icon="lucide:lightbulb" color="yellow"}
**ç‰ˆæœ¬é€‰æ‹©å»ºè®®**:
- ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ LTSï¼ˆé•¿æœŸæ”¯æŒï¼‰ç‰ˆæœ¬
- Nuxt4 è¦æ±‚ Node.js 18.0.0+ æˆ–æ›´é«˜ç‰ˆæœ¬
- æ¨èä½¿ç”¨ Node.js 20.x è·å¾—æ›´å¥½çš„æ€§èƒ½
::

#### 2. åŒ…ç®¡ç†å™¨é…ç½®

**åŒ…ç®¡ç†å™¨å¯¹æ¯”åˆ†æï¼š**

| ç‰¹æ€§ | npm | yarn | pnpm |
|------|-----|------|------|
| å®‰è£…é€Ÿåº¦ | ä¸­ç­‰ | å¿« | **æœ€å¿«** |
| ç£ç›˜ä½¿ç”¨ | é«˜ | ä¸­ç­‰ | **æœ€å°‘** |
| ä¾èµ–ç®¡ç† | åŸºç¡€ | è‰¯å¥½ | **æœ€ä¸¥æ ¼** |
| ç”Ÿæ€å…¼å®¹ | å®Œç¾ | è‰¯å¥½ | è‰¯å¥½ |

**ä¸ºä»€ä¹ˆé€‰æ‹© pnpmï¼Ÿ**
- **ğŸš€ è¶…å¿«é€Ÿåº¦**: æ¯” npm å¿« 2-3 å€ï¼Œæ¯” yarn å¿« 1.5 å€
- **ğŸ’¾ èŠ‚çœç©ºé—´**: ä½¿ç”¨ç¡¬é“¾æ¥ï¼Œé¿å…é‡å¤å®‰è£…ç›¸åŒç‰ˆæœ¬çš„åŒ…
- **ğŸ”’ ä¸¥æ ¼ä¾èµ–**: é˜²æ­¢å¹»å½±ä¾èµ–ï¼ˆphantom dependenciesï¼‰é—®é¢˜
- **ğŸ“¦ ä¼ä¸šå‹å¥½**: æ›´å¥½çš„ monorepo æ”¯æŒï¼Œé€‚åˆå¤§å‹é¡¹ç›®

```bash
# å®‰è£… pnpm (ä¼ä¸šçº§æ¨è)
npm install -g pnpm@latest

# é…ç½®ä¼ä¸šçº§è®¾ç½®
pnpm config set store-dir ~/.pnpm-store        # è®¾ç½®å…¨å±€å­˜å‚¨ç›®å½•
pnpm config set registry https://registry.npmjs.org/  # è®¾ç½®é•œåƒæº
pnpm config set auto-install-peers true        # è‡ªåŠ¨å®‰è£…peerä¾èµ–
pnpm config set strict-peer-dependencies false # å…è®¸peerä¾èµ–ç‰ˆæœ¬ä¸åŒ¹é…

# éªŒè¯é…ç½®
pnpm config list
```

**pnpm å·¥ä½œåŸç†ï¼š**
```
ä¼ ç»ŸåŒ…ç®¡ç†å™¨ (npm/yarn):
node_modules/
â”œâ”€â”€ package-a/
â”‚   â””â”€â”€ node_modules/
â”‚       â””â”€â”€ shared-dep/  # é‡å¤å®‰è£…
â”œâ”€â”€ package-b/
â”‚   â””â”€â”€ node_modules/
â”‚       â””â”€â”€ shared-dep/  # é‡å¤å®‰è£…

pnpm ç¡¬é“¾æ¥æ–¹å¼:
.pnpm-store/
â””â”€â”€ shared-dep@1.0.0/    # åªå­˜å‚¨ä¸€ä»½
node_modules/
â”œâ”€â”€ package-a/ -> .pnpm-store/package-a/
â”œâ”€â”€ package-b/ -> .pnpm-store/package-b/
â””â”€â”€ .pnpm/
    â””â”€â”€ shared-dep@1.0.0/ -> .pnpm-store/shared-dep@1.0.0/
```

#### 3. Git ç‰ˆæœ¬æ§åˆ¶

**Git åœ¨ä¼ä¸šçº§å¼€å‘ä¸­çš„é‡è¦æ€§ï¼š**
- **ç‰ˆæœ¬æ§åˆ¶**: è·Ÿè¸ªä»£ç å˜æ›´å†å²ï¼Œæ”¯æŒå›æ»šå’Œåˆ†æ”¯ç®¡ç†
- **å›¢é˜Ÿåä½œ**: å¤šäººå¹¶è¡Œå¼€å‘ï¼Œè§£å†³ä»£ç å†²çª
- **ä»£ç å®¡æŸ¥**: é€šè¿‡ Pull Request è¿›è¡Œä»£ç è´¨é‡æŠŠæ§
- **CI/CDé›†æˆ**: è‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²çš„è§¦å‘å™¨

```bash
# å…¨å±€Gité…ç½®
git config --global user.name "Your Name"
git config --global user.email "your.email@company.com"
git config --global init.defaultBranch main          # è®¾ç½®é»˜è®¤åˆ†æ”¯ä¸ºmain
git config --global pull.rebase true                 # æ‹‰å–æ—¶ä½¿ç”¨rebaseè€Œémerge
git config --global core.autocrlf input              # è¡Œå°¾ç¬¦è‡ªåŠ¨è½¬æ¢
git config --global core.editor "code --wait"        # è®¾ç½®é»˜è®¤ç¼–è¾‘å™¨ä¸ºVS Code

# é…ç½®SSHå¯†é’¥ï¼ˆæ¨èæ–¹å¼ï¼‰
ssh-keygen -t ed25519 -C "your.email@company.com"
```

**Git é…ç½®é¡¹è¯¦è§£ï¼š**

::tabs{variant="line"}
  ::stack{label="åˆ†æ”¯ç­–ç•¥"}
  ```bash
  # ä¼ä¸šçº§åˆ†æ”¯ç®¡ç†ç­–ç•¥
  git config --global init.defaultBranch main

  # åˆ†æ”¯å‘½åè§„èŒƒ
  feature/user-auth      # åŠŸèƒ½åˆ†æ”¯
  hotfix/critical-bug    # çƒ­ä¿®å¤åˆ†æ”¯
  release/v1.2.0         # å‘å¸ƒåˆ†æ”¯
  ```

  **åˆ†æ”¯ç­–ç•¥è¯´æ˜ï¼š**
  - `main`: ä¸»åˆ†æ”¯ï¼Œå§‹ç»ˆä¿æŒç”Ÿäº§å°±ç»ªçŠ¶æ€
  - `develop`: å¼€å‘åˆ†æ”¯ï¼Œé›†æˆæœ€æ–°åŠŸèƒ½
  - `feature/*`: åŠŸèƒ½åˆ†æ”¯ï¼Œç‹¬ç«‹å¼€å‘æ–°åŠŸèƒ½
  - `hotfix/*`: çƒ­ä¿®å¤åˆ†æ”¯ï¼Œç´§æ€¥ä¿®å¤ç”Ÿäº§é—®é¢˜
  ::

  ::stack{label="æäº¤è§„èŒƒ"}
  ```bash
  # æäº¤ä¿¡æ¯è§„èŒƒ (Conventional Commits)
  feat: æ–°åŠŸèƒ½
  fix: ä¿®å¤bug
  docs: æ–‡æ¡£æ›´æ–°
  style: ä»£ç æ ¼å¼ä¿®æ”¹
  refactor: ä»£ç é‡æ„
  test: æµ‹è¯•ç›¸å…³
  chore: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·å˜åŠ¨
  ```

  **æäº¤ä¿¡æ¯æ¨¡æ¿ï¼š**
  ```
  <type>(<scope>): <subject>

  <body>

  <footer>
  ```
  ::

  ::stack{label="SSHå¯†é’¥"}
  ```bash
  # ç”ŸæˆSSHå¯†é’¥
  ssh-keygen -t ed25519 -C "your.email@company.com"

  # å¯åŠ¨ssh-agent
  eval "$(ssh-agent -s)"

  # æ·»åŠ å¯†é’¥åˆ°ssh-agent
  ssh-add ~/.ssh/id_ed25519

  # å¤åˆ¶å…¬é’¥åˆ°å‰ªè´´æ¿
  cat ~/.ssh/id_ed25519.pub | pbcopy  # macOS
  cat ~/.ssh/id_ed25519.pub | xclip -selection clipboard  # Linux
  ```

  **SSHå¯†é’¥çš„ä¼˜åŠ¿ï¼š**
  - æ— éœ€æ¯æ¬¡è¾“å…¥å¯†ç 
  - æ›´åŠ å®‰å…¨å¯é 
  - æ”¯æŒå¯†é’¥è½®æ¢
  ::
::

## 4ã€é¡¹ç›®æ­å»ºæ­¥éª¤

### 4.1 é¡¹ç›®ç›®å½•ç»“æ„è§„èŒƒ

:::steps
#### 1. é¡¹ç›®è„šæ‰‹æ¶

**ä»€ä¹ˆæ˜¯ `nuxi`ï¼Ÿ**
`nuxi` æ˜¯ Nuxt çš„å®˜æ–¹ CLI å·¥å…·ï¼Œç”¨äºå¿«é€Ÿåˆ›å»ºã€å¼€å‘å’Œæ„å»º Nuxt åº”ç”¨ã€‚

::code-group
```bash [æ ‡å‡†ä¼ä¸šé¡¹ç›®]
# åˆ›å»ºé¡¹ç›®
pnpm dlx nuxi@latest init nuxt-enterprise-app
cd nuxt-enterprise-app

# å®‰è£…ä¾èµ–
pnpm install
```

```bash [åŸºäºæ¨¡æ¿åˆ›å»º]
# ä½¿ç”¨ä¼ä¸šçº§æ¨¡æ¿ (å¦‚æœæœ‰çš„è¯)
pnpm dlx nuxi@latest init -t enterprise nuxt-ai-enterprise
cd nuxt-ai-enterprise
```

```bash [monorepoé¡¹ç›®]
# åˆ›å»ºmonorepoç»“æ„
mkdir nuxt-enterprise-monorepo
cd nuxt-enterprise-monorepo
pnpm init

# åˆ›å»ºå·¥ä½œç©ºé—´é…ç½®
echo "packages:\n  - 'apps/*'\n  - 'packages/*'" > pnpm-workspace.yaml
```
::

**å‘½ä»¤è§£æï¼š**
- `pnpm dlx`: ä¸‹è½½å¹¶æ‰§è¡ŒåŒ…ï¼Œç±»ä¼¼äº `npx`
- `nuxi@latest`: ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ Nuxt CLI
- `init`: åˆ›å»ºæ–°é¡¹ç›®çš„å‘½ä»¤
- `enterprise-nuxt4-app`: é¡¹ç›®åç§°

**åˆå§‹åŒ–è¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ**
1. ğŸ“ åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„
2. ğŸ“¦ ç”ŸæˆåŸºç¡€é…ç½®æ–‡ä»¶
3. ğŸ”§ è®¾ç½® TypeScript æ”¯æŒ
4. ğŸ¨ é…ç½®å¼€å‘æœåŠ¡å™¨
5. ğŸ“‹ åˆ›å»ºç¤ºä¾‹é¡µé¢

#### 2. ä¼ä¸šçº§é¡¹ç›®ç»“æ„

**å¤æ‚çš„ä¸šåŠ¡ï¼Œæ¨èä½¿ç”¨ Monorepo æ¶æ„**
- **ä»£ç å…±äº«**: å¤šä¸ªåº”ç”¨å…±äº«ç»„ä»¶å’Œå·¥å…·
- **ç»Ÿä¸€ç®¡ç†**: ç»Ÿä¸€çš„ä¾èµ–ã€æ„å»ºå’Œéƒ¨ç½²æµç¨‹
- **å›¢é˜Ÿåä½œ**: æ›´å¥½çš„ä»£ç å¤ç”¨å’Œç»´æŠ¤
- **ç‰ˆæœ¬æ§åˆ¶**: ç»Ÿä¸€çš„ç‰ˆæœ¬ç®¡ç†å’Œå‘å¸ƒæµç¨‹

Monorepo é¡¹ç›®ç»“æ„ä»¥æ”¯æŒä¼ä¸šçº§å¼€å‘ï¼š

```
enterprise-nuxt4-app/
â”œâ”€â”€ ğŸ“ .github/                    # GitHubé…ç½®
â”‚   â”œâ”€â”€ workflows/                 # CI/CDæµæ°´çº¿
â”‚   â”œâ”€â”€ ISSUE_TEMPLATE/           # Issueæ¨¡æ¿
â”‚   â””â”€â”€ pull_request_template.md  # PRæ¨¡æ¿
â”œâ”€â”€ ğŸ“ .vscode/                    # VS Codeé…ç½®
â”‚   â”œâ”€â”€ extensions.json           # æ¨èæ‰©å±•
â”‚   â”œâ”€â”€ settings.json             # å·¥ä½œç©ºé—´è®¾ç½®
â”‚   â””â”€â”€ launch.json               # è°ƒè¯•é…ç½®
â”œâ”€â”€ ğŸ“ apps/                 # åº”ç”¨å±‚
â”‚   â”œâ”€â”€ ğŸ“ web/              # ä¸»åº”ç”¨
â”‚   â””â”€â”€ ğŸ“ admin/            # ç®¡ç†åå°
â”œâ”€â”€ ğŸ“ packages/             # å…±äº«åŒ…
â”‚   â”œâ”€â”€ ğŸ“ ui/               # UIç»„ä»¶åº“
â”‚   â”œâ”€â”€ ğŸ“ utils/            # å·¥å…·åº“
â”‚   â””â”€â”€ ğŸ“ types/            # ç±»å‹å®šä¹‰
â”œâ”€â”€ ğŸ“ docs/                 # æ–‡æ¡£
â”œâ”€â”€ ğŸ“ tests/                # æµ‹è¯•
â”œâ”€â”€ ğŸ“ tools/                # æ„å»ºå·¥å…·
â”œâ”€â”€ ğŸ“„ pnpm-workspace.yaml   # å·¥ä½œç©ºé—´é…ç½®
â”œâ”€â”€ ğŸ“„ turbo.json           # Turborepoé…ç½®
â””â”€â”€ ğŸ“„ docker-compose.yml   # æœ¬åœ°å¼€å‘ç¯å¢ƒ
```

å•ä¸ªé¡¹ç›®çš„æ–‡ä»¶ç»“æ„è®¾è®¡ï¼š

```
nuxt-enterprise-app/
â”œâ”€â”€ ğŸ“ assets/                     # é™æ€èµ„æº
â”‚   â”œâ”€â”€ css/                      # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ images/                   # å›¾ç‰‡èµ„æº
â”‚   â””â”€â”€ fonts/                    # å­—ä½“æ–‡ä»¶
â”œâ”€â”€ ğŸ“ components/                 # Vueç»„ä»¶
â”‚   â”œâ”€â”€ ui/                       # åŸºç¡€UIç»„ä»¶
â”‚   â”œâ”€â”€ business/                 # ä¸šåŠ¡ç»„ä»¶
â”‚   â”œâ”€â”€ layout/                   # å¸ƒå±€ç»„ä»¶
â”‚   â””â”€â”€ ai/                       # AIç›¸å…³ç»„ä»¶
â”œâ”€â”€ ğŸ“ composables/                # ç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ useAuth.ts                # è®¤è¯ç›¸å…³
â”‚   â”œâ”€â”€ useAI.ts                  # AIåŠŸèƒ½
â”‚   â”œâ”€â”€ useApi.ts                 # APIè¯·æ±‚
â”‚   â””â”€â”€ useUtils.ts               # å·¥å…·å‡½æ•°
â”œâ”€â”€ ğŸ“ layouts/                    # é¡µé¢å¸ƒå±€
â”‚   â”œâ”€â”€ default.vue               # é»˜è®¤å¸ƒå±€
â”‚   â”œâ”€â”€ auth.vue                  # è®¤è¯å¸ƒå±€
â”‚   â””â”€â”€ admin.vue                 # ç®¡ç†åå°å¸ƒå±€
â”œâ”€â”€ ğŸ“ middleware/                 # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ auth.ts                   # è®¤è¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ admin.ts                  # ç®¡ç†å‘˜ä¸­é—´ä»¶
â”‚   â””â”€â”€ guest.ts                  # è®¿å®¢ä¸­é—´ä»¶
â”œâ”€â”€ ğŸ“ pages/                      # é¡µé¢è·¯ç”±
â”‚   â”œâ”€â”€ index.vue                 # é¦–é¡µ
â”‚   â”œâ”€â”€ auth/                     # è®¤è¯ç›¸å…³é¡µé¢
â”‚   â”œâ”€â”€ admin/                    # ç®¡ç†åå°
â”‚   â””â”€â”€ api/                      # APIè·¯ç”±
â”œâ”€â”€ ğŸ“ plugins/                    # æ’ä»¶
â”‚   â”œâ”€â”€ pinia.client.ts           # Piniaé…ç½®
â”‚   â”œâ”€â”€ auth.client.ts            # è®¤è¯æ’ä»¶
â”‚   â””â”€â”€ ai.client.ts              # AIæœåŠ¡æ’ä»¶
â”œâ”€â”€ ğŸ“ server/                     # æœåŠ¡ç«¯
â”‚   â”œâ”€â”€ api/                      # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth/                 # è®¤è¯API
â”‚   â”‚   â”œâ”€â”€ ai/                   # AIæœåŠ¡API
â”‚   â”‚   â””â”€â”€ admin/                # ç®¡ç†API
â”‚   â”œâ”€â”€ middleware/               # æœåŠ¡ç«¯ä¸­é—´ä»¶
â”‚   â””â”€â”€ utils/                    # æœåŠ¡ç«¯å·¥å…·
â”œâ”€â”€ ğŸ“ stores/                     # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ auth.ts                   # ç”¨æˆ·è®¤è¯çŠ¶æ€
â”‚   â”œâ”€â”€ ai.ts                     # AIç›¸å…³çŠ¶æ€
â”‚   â””â”€â”€ app.ts                    # åº”ç”¨å…¨å±€çŠ¶æ€
â”œâ”€â”€ ğŸ“ types/                      # TypeScriptç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ auth.ts                   # è®¤è¯ç±»å‹
â”‚   â”œâ”€â”€ ai.ts                     # AIç›¸å…³ç±»å‹
â”‚   â””â”€â”€ api.ts                    # APIå“åº”ç±»å‹
â”œâ”€â”€ ğŸ“ utils/                      # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ api.ts                    # APIå·¥å…·
â”‚   â”œâ”€â”€ validation.ts             # éªŒè¯å·¥å…·
â”‚   â””â”€â”€ constants.ts              # å¸¸é‡å®šä¹‰
â”œâ”€â”€ ğŸ“ tests/                      # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ unit/                     # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ integration/              # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ e2e/                      # ç«¯åˆ°ç«¯æµ‹è¯•
â”œâ”€â”€ ğŸ“ docs/                       # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ api.md                    # APIæ–‡æ¡£
â”‚   â”œâ”€â”€ deployment.md             # éƒ¨ç½²æ–‡æ¡£
â”‚   â””â”€â”€ development.md            # å¼€å‘æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ .env.example                # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ ğŸ“„ .gitignore                  # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ .eslintrc.js                # ESLinté…ç½®
â”œâ”€â”€ ğŸ“„ .prettierrc                 # Prettieré…ç½®
â”œâ”€â”€ ğŸ“„ tailwind.config.js          # Tailwindé…ç½®
â”œâ”€â”€ ğŸ“„ tsconfig.json               # TypeScripté…ç½®
â”œâ”€â”€ ğŸ“„ nuxt.config.ts              # Nuxté…ç½®
â”œâ”€â”€ ğŸ“„ package.json                # é¡¹ç›®é…ç½®
â””â”€â”€ ğŸ“„ README.md                   # é¡¹ç›®è¯´æ˜
```

#### 3. å·¥ä½œç©ºé—´é…ç½®

**å·¥ä½œç©ºé—´é…ç½®çš„æ ¸å¿ƒæ¦‚å¿µï¼š**
- **Packageç®¡ç†**: å®šä¹‰å“ªäº›ç›®å½•åŒ…å«ç‹¬ç«‹çš„åŒ…
- **ä¾èµ–å…³ç³»**: ç®¡ç†åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»
- **æ„å»ºæµç¨‹**: å®šä¹‰æ„å»ºä»»åŠ¡çš„æ‰§è¡Œé¡ºåº
- **ç¼“å­˜ç­–ç•¥**: ä¼˜åŒ–æ„å»ºæ€§èƒ½

```yaml
# pnpm-workspace.yaml
packages:
  - 'apps/*' # åº”ç”¨ç¨‹åºç›®å½•
  - 'packages/*' # å…±äº«åŒ…ç›®å½•
  - 'tools/*' # æ„å»ºå·¥å…·ç›®å½•
```

**å·¥ä½œç©ºé—´çš„ä¼˜åŠ¿ï¼š**
1. **ç»Ÿä¸€ä¾èµ–**: æ‰€æœ‰åŒ…å…±äº«åŒä¸€ä¸ª `node_modules`
2. **ç‰ˆæœ¬ä¸€è‡´**: ç¡®ä¿æ‰€æœ‰åŒ…ä½¿ç”¨ç›¸åŒç‰ˆæœ¬çš„ä¾èµ–
3. **å¼€å‘æ•ˆç‡**: å¿«é€Ÿçš„åŒ…é—´é“¾æ¥å’Œçƒ­é‡è½½
4. **æ„å»ºä¼˜åŒ–**: å¢é‡æ„å»ºå’Œç¼“å­˜

```json
// turbo.json - Turborepo æ„å»ºé…ç½®
{
  "pipeline": {
    "build": {
      "dependsOn": ["^build"], // ä¾èµ–åŒ…å¿…é¡»å…ˆæ„å»º
      "outputs": [".next/**", "!.next/cache/**", "dist/**"] // æ„å»ºè¾“å‡º
    },
    "test": {
      "dependsOn": ["^build"], // æµ‹è¯•å‰éœ€è¦æ„å»º
      "outputs": []
    },
    "lint": {
      "outputs": [] // ä»£ç æ£€æŸ¥ä¸äº§ç”Ÿè¾“å‡ºæ–‡ä»¶
    },
    "dev": {
      "cache": false, // å¼€å‘æ¨¡å¼ä¸ç¼“å­˜
      "persistent": true // æŒç»­è¿è¡Œçš„ä»»åŠ¡
    }
  }
}
```

**Turborepo æ„å»ºæµç¨‹ï¼š**
```mermaid
graph TD
    A[ä»£ç å˜æ›´] --> B[æ£€æµ‹ä¾èµ–]
    B --> C[è®¡ç®—æ„å»ºé¡ºåº]
    C --> D[å¹¶è¡Œæ„å»º]
    D --> E[ç¼“å­˜ç»“æœ]
    E --> F[è¾“å‡ºåˆ°ç›®æ ‡]
```
:::

### 4.2 ä¾èµ–åŒ…ä»‹ç»

#### 4.2.1 åŸºç¡€æ¡†æ¶

```bash
# Nuxt4 æ ¸å¿ƒ
pnpm add nuxt@latest
pnpm add -D typescript @nuxt/typescript-build

# UIæ¡†æ¶
pnpm add @nuxtjs/tailwindcss
pnpm add @headlessui/vue @heroicons/vue
pnpm add @vueuse/nuxt @vueuse/core

# çŠ¶æ€ç®¡ç†
pnpm add pinia @pinia/nuxt
```

#### 4.2.2 ä¼ä¸šçº§å¢å¼º

```bash
# å›½é™…åŒ–
pnpm add @nuxtjs/i18n

# è¡¨å•å¤„ç†
pnpm add @vee-validate/nuxt vee-validate @vee-validate/yup yup

# HTTPå®¢æˆ·ç«¯
pnpm add @nuxtjs/axios @nuxtjs/proxy

# èº«ä»½éªŒè¯
pnpm add @nuxtjs/auth-next

# æ€§èƒ½ç›‘æ§
pnpm add @nuxtjs/google-analytics
pnpm add @sentry/nuxt
```

#### 4.2.3 å¼€å‘å·¥å…·

```bash
# ä»£ç è´¨é‡
pnpm add -D eslint @nuxt/eslint-config prettier
pnpm add -D @typescript-eslint/parser @typescript-eslint/eslint-plugin
pnpm add -D stylelint stylelint-config-standard-scss

# æµ‹è¯•æ¡†æ¶
pnpm add -D vitest @nuxt/test-utils @vue/test-utils
pnpm add -D playwright @playwright/test

# æ„å»ºå·¥å…·
pnpm add -D @nuxt/devtools
pnpm add -D cross-env dotenv-cli
```

### 4.3 é…ç½®æ–‡ä»¶è®¾ç½®

#### 4.3.1 Nuxt4 é…ç½®

**Nuxt4 é…ç½®æ–‡ä»¶çš„æ ¸å¿ƒä½œç”¨ï¼š**
- **åº”ç”¨é…ç½®**: å®šä¹‰åº”ç”¨çš„åŸºæœ¬è¡Œä¸ºå’Œç‰¹æ€§
- **æ¨¡å—ç®¡ç†**: é›†æˆç¬¬ä¸‰æ–¹æ¨¡å—å’Œæ’ä»¶
- **æ„å»ºä¼˜åŒ–**: é…ç½®æ„å»ºè¿‡ç¨‹å’Œæ€§èƒ½ä¼˜åŒ–
- **å¼€å‘ä½“éªŒ**: è®¾ç½®å¼€å‘å·¥å…·å’Œè°ƒè¯•åŠŸèƒ½

åˆ›å»ºç”Ÿäº§å°±ç»ªçš„ `nuxt.config.ts` é…ç½®æ¨¡ç‰ˆï¼š

```typescript [nuxt.config.ts]
export default defineNuxtConfig({
  // å¼€å‘å·¥å…·
  devtools: {
    enabled: true,
    timeline: {
      enabled: true
    }
  },

  // æ¨¡å—é…ç½®
  modules: [
    // UI & æ ·å¼
    '@nuxtjs/tailwindcss',
    'shadcn-nuxt',
    '@nuxtjs/color-mode',
    '@nuxtjs/google-fonts',

    // çŠ¶æ€ç®¡ç†
    '@pinia/nuxt',
    '@vee-validate/nuxt',

    // æ€§èƒ½ä¼˜åŒ–
    '@nuxtjs/seo',
    '@nuxtjs/sitemap',
    '@nuxtjs/web-vitals',

    // å¼€å‘ä½“éªŒ
    '@nuxt/eslint',
    '@nuxt/devtools',

    // ç›‘æ§
    '@sentry/nuxt/module',

    // å®‰å…¨
    '@nuxtjs/security'
  ],

  // åº”ç”¨é…ç½®
  app: {
    head: {
      charset: 'utf-8',
      viewport: 'width=device-width, initial-scale=1',
      title: 'Nuxt4 AI Enterprise App',
      meta: [
        { name: 'description', content: 'Enterprise-grade Nuxt4 application with AI integration' }
      ]
    }
  },

  // è¿è¡Œæ—¶é…ç½®
  runtimeConfig: {
    // ç§æœ‰é…ç½® (æœåŠ¡ç«¯)
    openaiApiKey: process.env.NUXT_OPENAI_API_KEY,
    claudeApiKey: process.env.NUXT_CLAUDE_API_KEY,
    databaseUrl: process.env.NUXT_DATABASE_URL,
    jwtSecret: process.env.NUXT_JWT_SECRET,
    redisUrl: process.env.NUXT_REDIS_URL,

    // å…¬å…±é…ç½® (å®¢æˆ·ç«¯)
    public: {
      appName: 'Nuxt4 AI Enterprise',
      apiBase: process.env.NUXT_PUBLIC_API_BASE || '/api',
      sentryDsn: process.env.NUXT_PUBLIC_SENTRY_DSN,
      environment: process.env.NODE_ENV || 'development'
    }
  },

  // æ„å»ºé…ç½®
  build: {
    transpile: ['@headlessui/vue']
  },

  // Viteé…ç½®
  vite: {
    define: {
      __VUE_PROD_HYDRATION_MISMATCH_DETAILS__: 'false'
    },
    optimizeDeps: {
      include: ['openai', '@anthropic-ai/sdk']
    }
  },

  // TypeScripté…ç½®
  typescript: {
    strict: true,
    typeCheck: true
  },

  // CSSé…ç½®
  css: [
    '~/assets/css/main.css'
  ],

  // ç»„ä»¶è‡ªåŠ¨å¯¼å…¥
  components: [
    {
      path: '~/components',
      pathPrefix: false,
    },
    {
      path: '~/components/ui',
      prefix: 'Ui'
    }
  ],

  // æ€§èƒ½ä¼˜åŒ–
  nitro: {
    compressPublicAssets: true,
    minify: true,
    experimental: {
      wasm: true
    }
  },

  // å®éªŒæ€§åŠŸèƒ½
  experimental: {
    payloadExtraction: false,
    viewTransition: true
  },

  // å­—ä½“é…ç½®
  googleFonts: {
    families: {
      'Inter': [400, 500, 600, 700],
      'JetBrains Mono': [400, 500, 600]
    },
    display: 'swap'
  },

  // SEOé…ç½®
  seo: {
    redirectToCanonicalSiteUrl: true
  },

  // å®‰å…¨é…ç½®
  security: {
    headers: {
      crossOriginEmbedderPolicy: process.env.NODE_ENV === 'development' ? 'unsafe-none' : 'require-corp',
      contentSecurityPolicy: {
        'base-uri': ['\'self\''],
        'font-src': ['\'self\'', 'https:', 'data:'],
        'form-action': ['\'self\''],
        'frame-ancestors': ['\'none\''],
        'img-src': ['\'self\'', 'data:', 'https:'],
        'object-src': ['\'none\''],
        'script-src-attr': ['\'none\''],
        'style-src': ['\'self\'', 'https:', '\'unsafe-inline\''],
        'upgrade-insecure-requests': true
      }
    }
  }
});
```

**é…ç½®é¡¹è¯¦è§£ï¼š**

::tabs{variant="line"}
  ::stack{label="æ¸²æŸ“æ¨¡å¼"}
  ```typescript
  // æ¸²æŸ“æ¨¡å¼é€‰æ‹©
  export default defineNuxtConfig({
    ssr: true, // æœåŠ¡ç«¯æ¸²æŸ“ (SSR)
    // ssr: false, // å•é¡µåº”ç”¨ (SPA)

    // æ··åˆæ¸²æŸ“ç­–ç•¥
    routeRules: {
      '/': { prerender: true }, // é™æ€é¢„æ¸²æŸ“
      '/admin/**': { ssr: false }, // SPAæ¨¡å¼
      '/api/**': { cors: true }, // APIè·¯ç”±
      '/blog/**': { isr: 3600 } // å¢é‡é™æ€å†ç”Ÿ
    }
  });
  ```

  **æ¸²æŸ“æ¨¡å¼å¯¹æ¯”ï¼š**
  - **SSR**: æœåŠ¡ç«¯æ¸²æŸ“ï¼ŒSEOå‹å¥½ï¼Œé¦–å±å¿«
  - **SPA**: å•é¡µåº”ç”¨ï¼Œäº¤äº’æµç•…ï¼Œå®¢æˆ·ç«¯æ¸²æŸ“
  - **SSG**: é™æ€ç”Ÿæˆï¼Œæ€§èƒ½æœ€ä½³ï¼Œé€‚åˆé™æ€å†…å®¹
  - **ISR**: å¢é‡é™æ€å†ç”Ÿï¼Œç»“åˆé™æ€å’ŒåŠ¨æ€çš„ä¼˜åŠ¿
  ::

  ::stack{label="æ¨¡å—ç³»ç»Ÿ"}
  ```typescript
  // æ¨¡å—é…ç½®æœ€ä½³å®è·µ
  export default defineNuxtConfig({
    modules: [
      // UIå’Œæ ·å¼
      '@nuxtjs/tailwindcss',
      '@nuxtjs/color-mode',

      // åŠŸèƒ½æ¨¡å—
      '@pinia/nuxt',
      '@vueuse/nuxt',
      '@nuxtjs/i18n',

      // å¼€å‘å·¥å…·
      '@nuxt/devtools',

      // ç”Ÿäº§å·¥å…·
      '@nuxtjs/google-analytics',
      '@sentry/nuxt/module'
    ],

    // æ¨¡å—é€‰é¡¹
    tailwindcss: {
      configPath: '~/tailwind.config.js'
    },

    i18n: {
      locales: ['en', 'zh'],
      defaultLocale: 'zh'
    }
  });
  ```

  **æ¨¡å—åŠ è½½é¡ºåºå¾ˆé‡è¦ï¼š**
  1. åŸºç¡€æ¨¡å—ï¼ˆTailwind CSSï¼‰
  2. åŠŸèƒ½æ¨¡å—ï¼ˆPiniaã€VueUseï¼‰
  3. å¼€å‘å·¥å…·
  4. ç›‘æ§å·¥å…·
  ::

  ::stack{label="æ€§èƒ½ä¼˜åŒ–"}
  ```typescript
  // æ€§èƒ½ä¼˜åŒ–é…ç½®
  export default defineNuxtConfig({
    // æ„å»ºä¼˜åŒ–
    build: {
      transpile: ['@headlessui/vue'],
      rollupOptions: {
        output: {
          manualChunks: {
            'vue-vendor': ['vue', 'vue-router'],
            'ui-vendor': ['@headlessui/vue']
          }
        }
      }
    },

    // Nitroä¼˜åŒ–
    nitro: {
      minify: true,
      compressPublicAssets: true,
      storage: {
        redis: {
          driver: 'redis',
          /* redis config */
        }
      }
    },

    // å®éªŒæ€§ä¼˜åŒ–
    experimental: {
      payloadExtraction: false, // å‡å°‘åŒ…å¤§å°
      inlineSSRStyles: false // é¿å…å†…è”æ ·å¼é—ªçƒ
    }
  });
  ```
  ::
::

#### 4.3.2 TypeScript é…ç½®

```json
// tsconfig.json
{
  "extends": "./.nuxt/tsconfig.json",
  "compilerOptions": {
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedIndexedAccess": true,
    "exactOptionalPropertyTypes": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"],
      "~/*": ["./src/*"],
      "@@/*": ["./*"],
      "~~/*": ["./*"]
    }
  },
  "include": [
    "**/*.ts",
    "**/*.tsx",
    "**/*.vue"
  ],
  "exclude": [
    "node_modules",
    ".nuxt",
    "dist"
  ]
}
```

#### 4.3.3  Lint ä»£ç è´¨é‡å·¥å…·é…ç½®

1ã€ESLint é…ç½®ï¼Œåˆ›å»º `.eslintrc.js` æ–‡ä»¶ï¼š

```javascript [.eslintrc.js]
module.exports = {
  root: true,
  extends: [
    '@antfu',
    '@nuxt/eslint-config'
  ],
  rules: {
    // è‡ªå®šä¹‰è§„åˆ™
    '@typescript-eslint/no-unused-vars': 'error',
    'vue/multi-word-component-names': 'off',
    'vue/no-multiple-template-root': 'off'
  },
  overrides: [
    {
      files: ['*.vue'],
      rules: {
        'vue/component-name-in-template-casing': ['error', 'PascalCase']
      }
    }
  ]
};
```

2ã€Prettier é…ç½®ï¼Œåˆ›å»º `.prettierrc` æ–‡ä»¶ï¼š

```json [.prettierrc]
{
  "semi": false,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5",
  "printWidth": 100,
  "bracketSpacing": true,
  "arrowParens": "avoid",
  "vueIndentScriptAndStyle": false,
  "endOfLine": "lf"
}
```

3ã€Husky é…ç½®

```bash [è®¾ç½®Gité’©å­]
# åˆå§‹åŒ–husky
pnpm dlx husky-init

# æ·»åŠ commit-msgé’©å­
echo 'pnpm dlx commitlint --edit "$1"' > .husky/commit-msg

# æ·»åŠ pre-commité’©å­
echo 'pnpm lint-staged' > .husky/pre-commit
```

åˆ›å»º `lint-staged.config.js`ï¼š

```javascript [lint-staged.config.js]
module.exports = {
  '*.{js,jsx,ts,tsx,vue}': [
    'eslint --fix',
    'prettier --write'
  ],
  '*.{css,scss,less,html,json,md}': [
    'prettier --write'
  ]
};
```

### 4.4. æµ‹è¯•æ¡†æ¶é…ç½®

####  4.4.1 Vitest å•å…ƒæµ‹è¯•

```typescript
import { resolve } from 'node:path';
// vitest.config.ts
import { defineConfig } from 'vitest/config';

export default defineConfig({
  test: {
    environment: 'nuxt',
    globals: true,
    setupFiles: ['./tests/setup.ts'],
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      exclude: [
        'coverage/**',
        'dist/**',
        'packages/*/test?(s)/**',
        '**/*.d.ts',
        'cypress/**',
        'test?(s)/**',
        'test?(-*).?(c|m)[jt]s?(x)',
        '**/*{.,-}test.?(c|m)[jt]s?(x)',
        '**/*{.,-}spec.?(c|m)[jt]s?(x)',
        '**/__tests__/**',
        '**/{karma,rollup,webpack,vite,vitest,jest,ava,babel,nyc,cypress,tsup,build}.config.*',
        '**/.{eslint,mocha,prettier}rc.{js,cjs,yml}'
      ]
    }
  },
  resolve: {
    alias: {
      '@': resolve(__dirname, './src'),
      '~': resolve(__dirname, './src')
    }
  }
});
```

#### 4.4.2 Playwright E2Eæµ‹è¯•

```typescript
// playwright.config.ts
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  testDir: './tests/e2e',
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  reporter: 'html',

  use: {
    baseURL: 'http://localhost:3000',
    trace: 'on-first-retry',
    screenshot: 'only-on-failure'
  },

  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] }
    },
    {
      name: 'firefox',
      use: { ...devices['Desktop Firefox'] }
    },
    {
      name: 'webkit',
      use: { ...devices['Desktop Safari'] }
    }
  ],

  webServer: {
    command: 'pnpm run dev',
    url: 'http://localhost:3000',
    reuseExistingServer: !process.env.CI
  }
});
```

### 4.5 CI/CD é…ç½®

#### 4.5.1 GitHub Actions

```yaml
# .github/workflows/ci.yml
name: CI/CD Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [18.x, 20.x]

    steps:
      - uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ matrix.node-version }}
          cache: pnpm

      - name: Install pnpm
        uses: pnpm/action-setup@v2
        with:
          version: 8

      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      - name: Run linting
        run: pnpm run lint

      - name: Run type checking
        run: pnpm run typecheck

      - name: Run unit tests
        run: pnpm run test:unit

      - name: Run E2E tests
        run: pnpm run test:e2e

      - name: Build application
        run: pnpm run build

      - name: Upload coverage to Codecov
        uses: codecov/codecov-action@v3
        with:
          file: ./coverage/coverage-final.json

  deploy:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'

    steps:
      - uses: actions/checkout@v4

      - name: Deploy to production
        run: |
          echo "Deploying to production..."
          # éƒ¨ç½²è„šæœ¬
```

### 4.6 ç›‘æ§ä¸æ€§èƒ½

#### 4.6.1 æ€§èƒ½ç›‘æ§é…ç½®

```typescript
// plugins/monitoring.client.ts
export default defineNuxtPlugin(() => {
  // æ€§èƒ½ç›‘æ§
  if (process.client) {
    // Web Vitals
    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {
      getCLS(console.log);
      getFID(console.log);
      getFCP(console.log);
      getLCP(console.log);
      getTTFB(console.log);
    });

    // é”™è¯¯ç›‘æ§
    window.addEventListener('error', (event) => {
      console.error('Global error:', event.error);
      // å‘é€åˆ°ç›‘æ§ç³»ç»Ÿ
    });

    // æœªå¤„ç†çš„Promiseæ‹’ç»
    window.addEventListener('unhandledrejection', (event) => {
      console.error('Unhandled promise rejection:', event.reason);
      // å‘é€åˆ°ç›‘æ§ç³»ç»Ÿ
    });
  }
});
```

#### 4.6.2 Sentry é”™è¯¯è¿½è¸ª

```typescript
// nuxt.config.ts
export default defineNuxtConfig({
  modules: [
    '@sentry/nuxt/module'
  ],

  sentry: {
    dsn: process.env.SENTRY_DSN,
    environment: process.env.NODE_ENV,
    tracesSampleRate: 1.0,
    integrations: [
      // æ€§èƒ½ç›‘æ§
      // é”™è¯¯è¾¹ç•Œ
      // ç”¨æˆ·åé¦ˆ
    ]
  }
});
```

### 4.7 Docker é…ç½®

#### 4.7.1 å¼€å‘ç¯å¢ƒ

```dockerfile
# Dockerfile.dev
FROM node:20-alpine

WORKDIR /app

# å®‰è£…pnpm
RUN npm install -g pnpm

# å¤åˆ¶packageæ–‡ä»¶
COPY package*.json pnpm-lock.yaml ./

# å®‰è£…ä¾èµ–
RUN pnpm install

# å¤åˆ¶æºä»£ç 
COPY . .

# æš´éœ²ç«¯å£
EXPOSE 3000

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
CMD ["pnpm", "run", "dev", "--host", "0.0.0.0"]
```

### 4.8 å®‰å…¨é…ç½®

#### 4.8.1 ç¯å¢ƒå˜é‡ç®¡ç†

åˆ›å»ºå®Œæ•´çš„ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ï¼š

::code-group
```bash [.env.example]
# ===========================================
# åº”ç”¨åŸºç¡€é…ç½®
# ===========================================
NODE_ENV=development
NUXT_PUBLIC_SITE_URL=http://localhost:3000
NUXT_PUBLIC_API_BASE=/api

# ===========================================
# AIæœåŠ¡é…ç½®
# ===========================================
NUXT_OPENAI_API_KEY=your_openai_api_key_here
NUXT_CLAUDE_API_KEY=your_claude_api_key_here
NUXT_OPENAI_ORGANIZATION=your_openai_org_id
NUXT_AI_MODEL_GPT=gpt-4-turbo-preview
NUXT_AI_MODEL_CLAUDE=claude-3-haiku-20240307

# ===========================================
# æ•°æ®åº“é…ç½®
# ===========================================
NUXT_DATABASE_URL=postgresql://user:password@localhost:5432/nuxt_app
NUXT_REDIS_URL=redis://localhost:6379

# ===========================================
# å®‰å…¨é…ç½®
# ===========================================
NUXT_JWT_SECRET=your-super-secret-jwt-key-here
NUXT_ENCRYPTION_KEY=your-32-character-encryption-key
NUXT_SESSION_SECRET=your-session-secret-here

# ===========================================
# ç¬¬ä¸‰æ–¹æœåŠ¡
# ===========================================
NUXT_PUBLIC_SENTRY_DSN=your_sentry_dsn_here
NUXT_STRIPE_SECRET_KEY=your_stripe_secret_key
NUXT_STRIPE_PUBLISHABLE_KEY=your_stripe_publishable_key

# ===========================================
# OAuthé…ç½®
# ===========================================
NUXT_GOOGLE_CLIENT_ID=your_google_client_id
NUXT_GOOGLE_CLIENT_SECRET=your_google_client_secret
NUXT_GITHUB_CLIENT_ID=your_github_client_id
NUXT_GITHUB_CLIENT_SECRET=your_github_client_secret

# ===========================================
# é‚®ä»¶æœåŠ¡
# ===========================================
NUXT_SMTP_HOST=smtp.gmail.com
NUXT_SMTP_PORT=587
NUXT_SMTP_USER=your_email@gmail.com
NUXT_SMTP_PASS=your_app_password

# ===========================================
# æ–‡ä»¶å­˜å‚¨
# ===========================================
NUXT_AWS_ACCESS_KEY_ID=your_aws_access_key
NUXT_AWS_SECRET_ACCESS_KEY=your_aws_secret_key
NUXT_AWS_REGION=us-east-1
NUXT_AWS_S3_BUCKET=your-bucket-name

# ===========================================
# ç›‘æ§å’Œåˆ†æ
# ===========================================
NUXT_PUBLIC_GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX
NUXT_PUBLIC_PLAUSIBLE_DOMAIN=your-domain.com
```

```bash [.env.development]
NODE_ENV=development
NUXT_PUBLIC_SITE_URL=http://localhost:3000
NUXT_LOG_LEVEL=debug

# å¼€å‘ç¯å¢ƒç‰¹å®šé…ç½®
NUXT_DEV_TOOLS=true
NUXT_DEVTOOLS_VSCODE_INTEGRATION=true
```

```bash [.env.production]
NODE_ENV=production
NUXT_PUBLIC_SITE_URL=https://your-domain.com
NUXT_LOG_LEVEL=error

# ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–
NUXT_NITRO_PRESET=node-server
NUXT_NITRO_MINIFY=true
```
::

### 4.9 ä¸­é—´ä»¶

```typescript
// middleware/security.global.ts
export default defineNuxtRouteMiddleware((to, from) => {
  // CSPé…ç½®
  if (process.server) {
    const event = useRequestEvent();
    setResponseHeader(event, 'Content-Security-Policy', [
      'default-src \'self\'',
      'script-src \'self\' \'unsafe-inline\' \'unsafe-eval\'',
      'style-src \'self\' \'unsafe-inline\'',
      'img-src \'self\' data: https:',
      'font-src \'self\' data:',
      'connect-src \'self\' https://api.example.com'
    ].join('; '));
  }
});
```

## 5ã€å¼€å‘æµç¨‹

### 5.1 ä»£ç æäº¤è§„èŒƒ

```json
// .commitlintrc.json
{
  "extends": ["@commitlint/config-conventional"],
  "rules": {
    "type-enum": [
      2,
      "always",
      [
        "feat",
        "fix",
        "docs",
        "style",
        "refactor",
        "perf",
        "test",
        "build",
        "ci",
        "chore",
        "revert"
      ]
    ],
    "subject-case": [2, "never", ["sentence-case", "start-case", "pascal-case", "upper-case"]],
    "subject-empty": [2, "never"],
    "subject-full-stop": [2, "never", "."],
    "header-max-length": [2, "always", 72]
  }
}
```

### 5.2 Git Hooks

```bash
# .husky/pre-commit
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# è¿è¡Œlintæ£€æŸ¥
pnpm run lint

# è¿è¡Œç±»å‹æ£€æŸ¥
pnpm run typecheck

# è¿è¡Œå•å…ƒæµ‹è¯•
pnpm run test:unit
```

## 6ã€æ€§èƒ½ä¼˜åŒ–

æ„å»ºä¼˜åŒ–

```typescript
// nuxt.config.ts
export default defineNuxtConfig({
  // æ„å»ºä¼˜åŒ–
  build: {
    transpile: ['@headlessui/vue'],
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['vue', 'vue-router'],
          ui: ['@headlessui/vue', '@heroicons/vue']
        }
      }
    }
  },

  // èµ„æºä¼˜åŒ–
  image: {
    provider: 'cloudinary',
    cloudinary: {
      baseURL: 'https://res.cloudinary.com/your-cloud-name/image/upload/'
    }
  },

  // ç¼“å­˜ç­–ç•¥
  routeRules: {
    // é™æ€é¡µé¢é¢„æ¸²æŸ“
    '/': { prerender: true },
    '/about': { prerender: true },

    // APIç¼“å­˜
    '/api/**': { cors: true, headers: { 'cache-control': 's-maxage=60' } },

    // åŠ¨æ€é¡µé¢ISR
    '/blog/**': { isr: 3600 },

    // SPAæ¨¡å¼
    '/admin/**': { ssr: false }
  }
});
```

## 7ã€éƒ¨ç½²é…ç½®

ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

```yaml
# docker-compose.prod.yml
version: '3.8'

services:
  app:
    build:
      context: .
      dockerfile: Dockerfile.prod
    ports:
      - '3000:3000'
    environment:
      - NODE_ENV=production
      - DATABASE_URL=${DATABASE_URL}
    depends_on:
      - db
      - redis
    restart: unless-stopped

  db:
    image: postgres:15-alpine
    environment:
      - POSTGRES_DB=${DB_NAME}
      - POSTGRES_USER=${DB_USER}
      - POSTGRES_PASSWORD=${DB_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    restart: unless-stopped

  redis:
    image: redis:7-alpine
    restart: unless-stopped

volumes:
  postgres_data:
```

## 8ã€å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### Q1: é¡¹ç›®å¯åŠ¨å¤±è´¥

**é—®é¢˜**: è¿è¡Œ `pnpm dev` æ—¶æŠ¥é”™

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ¸…é™¤ç¼“å­˜
rm -rf .nuxt .output node_modules

# é‡æ–°å®‰è£…ä¾èµ–
pnpm install

# é‡æ–°å¯åŠ¨
pnpm dev
```

### Q2: TypeScript ç±»å‹é”™è¯¯

**é—®é¢˜**: ç±»å‹æ£€æŸ¥å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ç”Ÿæˆç±»å‹æ–‡ä»¶
pnpm nuxt prepare

# é‡æ–°æ£€æŸ¥ç±»å‹
pnpm nuxt typecheck
```

### Q3: æ„å»ºå¤±è´¥

**é—®é¢˜**: ç”Ÿäº§æ„å»ºæŠ¥é”™

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•
pnpm nuxt info

# æ¸…é™¤ç¼“å­˜é‡æ–°æ„å»º
rm -rf .nuxt .output
pnpm build
```

## ğŸ¯ æ€»ç»“

### ä¼ä¸šçº§ç‰¹æ€§æ¸…å•

::card-group{cols=2}
  ::::card{icon="lucide:shield-check"}
  #title
  **å®‰å…¨æ€§**
  #description
  - âœ… ç±»å‹å®‰å…¨ (TypeScript)
  - âœ… è¾“å…¥éªŒè¯ (Yup)
  - âœ… å®‰å…¨ä¸­é—´ä»¶
  - âœ… ç¯å¢ƒå˜é‡ç®¡ç†
  ::::

  ::::card{icon="lucide:users"}
  #title
  **å›¢é˜Ÿåä½œ**
  #description
  - âœ… ç»Ÿä¸€ä»£ç è§„èŒƒ
  - âœ… è‡ªåŠ¨åŒ–æµ‹è¯•
  - âœ… ä»£ç å®¡æŸ¥æµç¨‹
  - âœ… æ–‡æ¡£ç”Ÿæˆ
  ::::

  ::::card{icon="lucide:zap"}
  #title
  **æ€§èƒ½ä¼˜åŒ–**
  #description
  - âœ… æ„å»ºä¼˜åŒ–
  - âœ… ç¼“å­˜ç­–ç•¥
  - âœ… å›¾ç‰‡ä¼˜åŒ–
  - âœ… æ€§èƒ½ç›‘æ§
  ::::

  ::::card{icon="lucide:deployment"}
  #title
  **éƒ¨ç½²è¿ç»´**
  #description
  - âœ… å®¹å™¨åŒ–éƒ¨ç½²
  - âœ… CI/CDæµæ°´çº¿
  - âœ… å¥åº·æ£€æŸ¥
  - âœ… æ—¥å¿—ç›‘æ§
  ::::
::
