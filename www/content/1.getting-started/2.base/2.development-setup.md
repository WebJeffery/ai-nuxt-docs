---
title: é¡¹ç›®å¼€å‘ç¯å¢ƒæ­å»º
description: å…¨é¢çš„Nuxtä¼ä¸šçº§é¡¹ç›®å¼€å‘ç¯å¢ƒæ­å»ºæŒ‡å—ï¼Œæ¶µç›–å·¥å…·é“¾ã€CI/CDã€ç›‘æ§ã€æµ‹è¯•ç­‰å®Œæ•´æŠ€æœ¯æ ˆ
icon: 'lucide:building-2'
---

## 1ã€é¡¹ç›®æ¦‚è¿°

æœ¬æŒ‡å—ä»‹ç»å¦‚ä½•ä½¿ç”¨ Nuxt æ„å»ºå¤§å‹ã€å¯æ‰©å±•ã€é«˜æ€§èƒ½çš„ä¼ä¸šçº§åº”ç”¨çš„å¼€å‘ç¯å¢ƒï¼ŒåŒ…æ‹¬ä»£ç è´¨é‡ä¿è¯ã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€æŒç»­é›†æˆã€æ€§èƒ½ç›‘æ§ç­‰ä¼ä¸šçº§ç‰¹æ€§ã€‚

### 1.1 ä¸ºä»€ä¹ˆé€‰æ‹© Nuxt4ï¼Ÿ

**Nuxt4** æ˜¯åŸºäº Vue 3 çš„å…¨æ ˆæ¡†æ¶ï¼Œä¸“ä¸ºç°ä»£Webåº”ç”¨è€Œè®¾è®¡ï¼š

- **ğŸš€ æ€§èƒ½ä¼˜å¼‚**: å†…ç½® Vite æ„å»ºå·¥å…·ï¼Œå¼€å‘ä½“éªŒæä½³ï¼Œæ„å»ºé€Ÿåº¦å¿«
- **ğŸ”§ å¼€ç®±å³ç”¨**: é›¶é…ç½®å¯åŠ¨ï¼Œçº¦å®šä¼˜äºé…ç½®ï¼Œå‡å°‘æ ·æ¿ä»£ç 
- **ğŸŒ å…¨æ ˆèƒ½åŠ›**: å‰ç«¯+åç«¯ä¸€ä½“åŒ–å¼€å‘ï¼ŒNitro æœåŠ¡å™¨å¼•æ“å¼ºå¤§
- **ğŸ“± ç°ä»£åŒ–**: æ”¯æŒ SSRã€SSGã€SPA ç­‰å¤šç§æ¸²æŸ“æ¨¡å¼
- **ğŸ”’ ç±»å‹å®‰å…¨**: åŸç”Ÿ TypeScript æ”¯æŒï¼Œæ›´å¥½çš„å¼€å‘ä½“éªŒ
- **ğŸ¯ SEOå‹å¥½**: æœåŠ¡ç«¯æ¸²æŸ“ï¼Œæœç´¢å¼•æ“ä¼˜åŒ–æ•ˆæœå¥½

### 1.2 ä¼ä¸šçº§å¼€å‘çš„æ ¸å¿ƒéœ€æ±‚

::card-group{cols=2}
  ::::card{icon="lucide:users"}
  #title
  **å›¢é˜Ÿåä½œ**
  #description
  - ç»Ÿä¸€çš„ä»£ç è§„èŒƒå’Œé£æ ¼
  - è‡ªåŠ¨åŒ–çš„ä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–
  - ç‰ˆæœ¬æ§åˆ¶å’Œåˆ†æ”¯ç®¡ç†ç­–ç•¥
  - ä»£ç å®¡æŸ¥å’Œè´¨é‡æŠŠæ§
  ::::

  ::::card{icon="lucide:shield"}
  #title
  **è´¨é‡ä¿è¯**
  #description
  - å®Œæ•´çš„æµ‹è¯•è¦†ç›–ï¼ˆå•å…ƒã€é›†æˆã€E2Eï¼‰
  - ç±»å‹å®‰å…¨å’Œé”™è¯¯é¢„é˜²
  - æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–
  - å®‰å…¨æ€§é…ç½®å’Œæœ€ä½³å®è·µ
  ::::

  ::::card{icon="lucide:zap"}
  #title
  **å¼€å‘æ•ˆç‡**
  #description
  - çƒ­é‡è½½å’Œå¿«é€Ÿå¼€å‘åé¦ˆ
  - æ™ºèƒ½çš„IDEæ”¯æŒå’Œæç¤º
  - è‡ªåŠ¨åŒ–çš„æ„å»ºå’Œéƒ¨ç½²
  - å¼€å‘å·¥å…·å’Œè°ƒè¯•æ”¯æŒ
  ::::

  ::::card{icon="lucide:rocket"}
  #title
  **ç”Ÿäº§å°±ç»ª**
  #description
  - å®¹å™¨åŒ–éƒ¨ç½²å’Œæ‰©å±•
  - CI/CD æµæ°´çº¿è‡ªåŠ¨åŒ–
  - ç›‘æ§ã€æ—¥å¿—å’Œå‘Šè­¦
  - é«˜å¯ç”¨æ€§å’Œå®¹é”™å¤„ç†
  ::::
::

::alert{icon="lucide:info" color="blue"}
**é€‚ç”¨åœºæ™¯**: ä¸­å¤§å‹ä¼ä¸šã€å¤æ‚ä¸šåŠ¡ç³»ç»Ÿã€å¤šå›¢é˜Ÿåä½œã€é«˜å¯ç”¨æ€§è¦æ±‚çš„é¡¹ç›®
::

## 2ã€ æŠ€æœ¯æ ˆæ¦‚è§ˆ

### 2.1 æŠ€æœ¯æ ˆé€‰æ‹©åŸåˆ™

åœ¨ä¼ä¸šçº§é¡¹ç›®ä¸­ï¼ŒæŠ€æœ¯æ ˆçš„é€‰æ‹©è‡³å…³é‡è¦ã€‚æˆ‘ä»¬çš„é€‰æ‹©åŸºäºä»¥ä¸‹åŸåˆ™ï¼š

1. **ğŸ¯ æˆç†Ÿç¨³å®š**: é€‰æ‹©ç»è¿‡å¤§è§„æ¨¡ç”Ÿäº§éªŒè¯çš„æŠ€æœ¯
2. **ğŸš€ æ€§èƒ½ä¼˜å…ˆ**: ä¼˜å…ˆè€ƒè™‘è¿è¡Œæ—¶æ€§èƒ½å’Œå¼€å‘ä½“éªŒ
3. **ğŸ”§ ç”Ÿæ€å®Œå–„**: æ‹¥æœ‰ä¸°å¯Œçš„æ’ä»¶å’Œç¤¾åŒºæ”¯æŒ
4. **ğŸ‘¥ å›¢é˜Ÿé€‚é…**: ç¬¦åˆå›¢é˜ŸæŠ€æœ¯æ ˆå’Œå­¦ä¹ æ›²çº¿
5. **ğŸ”® æœªæ¥å¯¼å‘**: æŠ€æœ¯å‘å±•è¶‹åŠ¿å’Œé•¿æœŸç»´æŠ¤æ€§

### 2.2 æ ¸å¿ƒæŠ€æœ¯æ ˆ

**æ¯ä¸ªæŠ€æœ¯é€‰æ‹©çš„æ·±åº¦è§£æï¼š**

::card-group{cols=2}
  ::::card{icon="lucide:layers"}
  #title
  **å‰ç«¯æ¡†æ¶**
  #description
  - **Nuxt4**: åŸºäºVue3çš„å…¨æ ˆæ¡†æ¶ï¼Œæä¾›SSR/SSGèƒ½åŠ›
  - **TypeScript 5.x**: é™æ€ç±»å‹æ£€æŸ¥ï¼Œæå‡ä»£ç è´¨é‡å’Œå¼€å‘ä½“éªŒ
  - **Tailwind CSS 3.x**: åŸå­åŒ–CSSæ¡†æ¶ï¼Œé«˜æ•ˆæ ·å¼å¼€å‘
  - **Pinia**: Vue3å®˜æ–¹æ¨èçš„çŠ¶æ€ç®¡ç†åº“ï¼Œæ›¿ä»£Vuex

  **ä¸ºä»€ä¹ˆé€‰æ‹©Vue3ç”Ÿæ€ï¼Ÿ**
  - ç»„åˆå¼APIæä¾›æ›´å¥½çš„é€»è¾‘å¤ç”¨å’Œä»£ç ç»„ç»‡
  - æ›´å°çš„åŒ…ä½“ç§¯å’Œæ›´å¥½çš„æ€§èƒ½
  - æ›´å¥½çš„TypeScriptæ”¯æŒ
  ::::

  ::::card{icon="lucide:server"}
  #title
  **æœåŠ¡ç«¯æ¸²æŸ“**
  #description
  - **Nitro æœåŠ¡å™¨å¼•æ“**: é«˜æ€§èƒ½æœåŠ¡å™¨è¿è¡Œæ—¶ï¼Œæ”¯æŒå¤šå¹³å°éƒ¨ç½²
  - **å…¨æ ˆ API å¼€å‘**: å‰åç«¯ä¸€ä½“åŒ–ï¼Œå‡å°‘å¼€å‘å¤æ‚åº¦
  - **è¾¹ç¼˜å‡½æ•°éƒ¨ç½²**: æ”¯æŒVercelã€Netlifyç­‰ç°ä»£éƒ¨ç½²å¹³å°
  - **æœåŠ¡ç«¯ç»„ä»¶**: åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“ç»„ä»¶ï¼Œå‡å°‘å®¢æˆ·ç«¯è´Ÿè½½

  **Nitroå¼•æ“ä¼˜åŠ¿ï¼š**
  - é›¶é…ç½®éƒ¨ç½²åˆ°ä»»ä½•å¹³å°
  - è‡ªåŠ¨ä»£ç æ‹†åˆ†å’Œä¼˜åŒ–
  - å†…ç½®ç¼“å­˜å’Œæ€§èƒ½ä¼˜åŒ–
  ::::

  ::::card{icon="lucide:database"}
  #title
  **æ•°æ®å±‚**
  #description
  - **Prisma ORM**: ç°ä»£æ•°æ®åº“å·¥å…·ï¼Œç±»å‹å®‰å…¨çš„æ•°æ®åº“è®¿é—®
  - **PostgreSQL / MySQL**: æˆç†Ÿçš„å…³ç³»å‹æ•°æ®åº“
  - **Redis ç¼“å­˜**: é«˜æ€§èƒ½å†…å­˜æ•°æ®åº“ï¼Œç”¨äºç¼“å­˜å’Œä¼šè¯å­˜å‚¨
  - **GraphQL API**: çµæ´»çš„APIæŸ¥è¯¢è¯­è¨€ï¼Œå‰ç«¯æŒ‰éœ€è·å–æ•°æ®

  **æ•°æ®å±‚æ¶æ„ä¼˜åŠ¿ï¼š**
  - Prismaæä¾›ç±»å‹å®‰å…¨çš„æ•°æ®åº“æ“ä½œ
  - æ•°æ®åº“è¿ç§»å’Œç‰ˆæœ¬ç®¡ç†
  - æŸ¥è¯¢ä¼˜åŒ–å’Œæ€§èƒ½ç›‘æ§
  ::::

  ::::card{icon="lucide:shield"}
  #title
  **è´¨é‡ä¿è¯**
  #description
  - **ESLint + Prettier**: ä»£ç è§„èŒƒæ£€æŸ¥å’Œè‡ªåŠ¨æ ¼å¼åŒ–
  - **Vitest å•å…ƒæµ‹è¯•**: åŸºäºViteçš„é«˜æ€§èƒ½æµ‹è¯•æ¡†æ¶
  - **Playwright E2Eæµ‹è¯•**: è·¨æµè§ˆå™¨ç«¯åˆ°ç«¯æµ‹è¯•
  - **SonarQube**: ä»£ç è´¨é‡å’Œå®‰å…¨æ€§æ‰«æ

  **è´¨é‡ä¿è¯ä½“ç³»ï¼š**
  - å¤šå±‚æ¬¡æµ‹è¯•è¦†ç›–ï¼ˆå•å…ƒã€é›†æˆã€E2Eï¼‰
  - è‡ªåŠ¨åŒ–ä»£ç è´¨é‡æ£€æŸ¥
  - æ€§èƒ½å’Œå®‰å…¨æ€§ç›‘æ§
  ::::
::

## 3ã€ç¯å¢ƒå‡†å¤‡

### 3.1 ç³»ç»Ÿè¦æ±‚

::alert{icon="lucide:cpu" color="yellow"}
**ä¼ä¸šçº§ç³»ç»Ÿè¦æ±‚**:
- CPU: 4æ ¸å¿ƒä»¥ä¸Š (æ¨è8æ ¸å¿ƒ)
- å†…å­˜: 16GBä»¥ä¸Š (æ¨è32GB)
- å­˜å‚¨: NVMe SSD 500GBä»¥ä¸Š
- ç½‘ç»œ: ç¨³å®šçš„ä¼ä¸šç½‘ç»œç¯å¢ƒ
::

### 3.2 å¼€å‘å·¥å…·å®‰è£…

#### 1. Node.js è¿è¡Œæ—¶ç¯å¢ƒ

**Node.js æ˜¯ä»€ä¹ˆï¼Ÿ**
Node.js æ˜¯åŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œæ—¶ç¯å¢ƒï¼Œè®© JavaScript å¯ä»¥è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯ã€‚å¯¹äº Nuxt4 é¡¹ç›®ï¼ŒNode.js æ˜¯å¿…éœ€çš„åŸºç¡€è¿è¡Œæ—¶ã€‚

**ä¸ºä»€ä¹ˆæ¨èä½¿ç”¨ NVMï¼Ÿ**
- **ç‰ˆæœ¬ç®¡ç†**: å¯ä»¥å®‰è£…å’Œåˆ‡æ¢å¤šä¸ª Node.js ç‰ˆæœ¬
- **é¡¹ç›®éš”ç¦»**: ä¸åŒé¡¹ç›®å¯ä»¥ä½¿ç”¨ä¸åŒçš„ Node.js ç‰ˆæœ¬
- **å›¢é˜Ÿåä½œ**: ç¡®ä¿å›¢é˜Ÿæˆå‘˜ä½¿ç”¨ç›¸åŒçš„ Node.js ç‰ˆæœ¬

```bash
# ä½¿ç”¨ Node Version Manager (æ¨è)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# é‡æ–°åŠ è½½ç»ˆç«¯é…ç½®
source ~/.bashrc

# å®‰è£…æœ€æ–°çš„ LTS ç‰ˆæœ¬
nvm install --lts
nvm use --lts
nvm alias default node

# éªŒè¯å®‰è£…
node --version  # v20.10.0+
npm --version   # v10.2.0+
```

::alert{icon="lucide:lightbulb" color="yellow"}
**ç‰ˆæœ¬é€‰æ‹©å»ºè®®**:
- ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ LTSï¼ˆé•¿æœŸæ”¯æŒï¼‰ç‰ˆæœ¬
- Nuxt4 è¦æ±‚ Node.js 18.0.0+ æˆ–æ›´é«˜ç‰ˆæœ¬
- æ¨èä½¿ç”¨ Node.js 20.x è·å¾—æ›´å¥½çš„æ€§èƒ½
::

#### 2. åŒ…ç®¡ç†å™¨é…ç½®

**åŒ…ç®¡ç†å™¨å¯¹æ¯”åˆ†æï¼š**

| ç‰¹æ€§ | npm | yarn | pnpm |
|------|-----|------|------|
| å®‰è£…é€Ÿåº¦ | ä¸­ç­‰ | å¿« | **æœ€å¿«** |
| ç£ç›˜ä½¿ç”¨ | é«˜ | ä¸­ç­‰ | **æœ€å°‘** |
| ä¾èµ–ç®¡ç† | åŸºç¡€ | è‰¯å¥½ | **æœ€ä¸¥æ ¼** |
| ç”Ÿæ€å…¼å®¹ | å®Œç¾ | è‰¯å¥½ | è‰¯å¥½ |

**ä¸ºä»€ä¹ˆé€‰æ‹© pnpmï¼Ÿ**
- **ğŸš€ è¶…å¿«é€Ÿåº¦**: æ¯” npm å¿« 2-3 å€ï¼Œæ¯” yarn å¿« 1.5 å€
- **ğŸ’¾ èŠ‚çœç©ºé—´**: ä½¿ç”¨ç¡¬é“¾æ¥ï¼Œé¿å…é‡å¤å®‰è£…ç›¸åŒç‰ˆæœ¬çš„åŒ…
- **ğŸ”’ ä¸¥æ ¼ä¾èµ–**: é˜²æ­¢å¹»å½±ä¾èµ–ï¼ˆphantom dependenciesï¼‰é—®é¢˜
- **ğŸ“¦ ä¼ä¸šå‹å¥½**: æ›´å¥½çš„ monorepo æ”¯æŒï¼Œé€‚åˆå¤§å‹é¡¹ç›®

```bash
# å®‰è£… pnpm (ä¼ä¸šçº§æ¨è)
npm install -g pnpm@latest

# é…ç½®ä¼ä¸šçº§è®¾ç½®
pnpm config set store-dir ~/.pnpm-store        # è®¾ç½®å…¨å±€å­˜å‚¨ç›®å½•
pnpm config set registry https://registry.npmjs.org/  # è®¾ç½®é•œåƒæº
pnpm config set auto-install-peers true        # è‡ªåŠ¨å®‰è£…peerä¾èµ–
pnpm config set strict-peer-dependencies false # å…è®¸peerä¾èµ–ç‰ˆæœ¬ä¸åŒ¹é…

# éªŒè¯é…ç½®
pnpm config list
```

**pnpm å·¥ä½œåŸç†ï¼š**
```
ä¼ ç»ŸåŒ…ç®¡ç†å™¨ (npm/yarn):
node_modules/
â”œâ”€â”€ package-a/
â”‚   â””â”€â”€ node_modules/
â”‚       â””â”€â”€ shared-dep/  # é‡å¤å®‰è£…
â”œâ”€â”€ package-b/
â”‚   â””â”€â”€ node_modules/
â”‚       â””â”€â”€ shared-dep/  # é‡å¤å®‰è£…

pnpm ç¡¬é“¾æ¥æ–¹å¼:
.pnpm-store/
â””â”€â”€ shared-dep@1.0.0/    # åªå­˜å‚¨ä¸€ä»½
node_modules/
â”œâ”€â”€ package-a/ -> .pnpm-store/package-a/
â”œâ”€â”€ package-b/ -> .pnpm-store/package-b/
â””â”€â”€ .pnpm/
    â””â”€â”€ shared-dep@1.0.0/ -> .pnpm-store/shared-dep@1.0.0/
```

#### 3. Git ç‰ˆæœ¬æ§åˆ¶

**Git åœ¨ä¼ä¸šçº§å¼€å‘ä¸­çš„é‡è¦æ€§ï¼š**
- **ç‰ˆæœ¬æ§åˆ¶**: è·Ÿè¸ªä»£ç å˜æ›´å†å²ï¼Œæ”¯æŒå›æ»šå’Œåˆ†æ”¯ç®¡ç†
- **å›¢é˜Ÿåä½œ**: å¤šäººå¹¶è¡Œå¼€å‘ï¼Œè§£å†³ä»£ç å†²çª
- **ä»£ç å®¡æŸ¥**: é€šè¿‡ Pull Request è¿›è¡Œä»£ç è´¨é‡æŠŠæ§
- **CI/CDé›†æˆ**: è‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²çš„è§¦å‘å™¨

```bash
# å…¨å±€Gité…ç½®
git config --global user.name "Your Name"
git config --global user.email "your.email@company.com"
git config --global init.defaultBranch main          # è®¾ç½®é»˜è®¤åˆ†æ”¯ä¸ºmain
git config --global pull.rebase true                 # æ‹‰å–æ—¶ä½¿ç”¨rebaseè€Œémerge
git config --global core.autocrlf input              # è¡Œå°¾ç¬¦è‡ªåŠ¨è½¬æ¢
git config --global core.editor "code --wait"        # è®¾ç½®é»˜è®¤ç¼–è¾‘å™¨ä¸ºVS Code

# é…ç½®SSHå¯†é’¥ï¼ˆæ¨èæ–¹å¼ï¼‰
ssh-keygen -t ed25519 -C "your.email@company.com"
```

**Git é…ç½®é¡¹è¯¦è§£ï¼š**

::tabs{variant="line"}
  ::stack{label="åˆ†æ”¯ç­–ç•¥"}
  ```bash
  # ä¼ä¸šçº§åˆ†æ”¯ç®¡ç†ç­–ç•¥
  git config --global init.defaultBranch main

  # åˆ†æ”¯å‘½åè§„èŒƒ
  feature/user-auth      # åŠŸèƒ½åˆ†æ”¯
  hotfix/critical-bug    # çƒ­ä¿®å¤åˆ†æ”¯
  release/v1.2.0         # å‘å¸ƒåˆ†æ”¯
  ```

  **åˆ†æ”¯ç­–ç•¥è¯´æ˜ï¼š**
  - `main`: ä¸»åˆ†æ”¯ï¼Œå§‹ç»ˆä¿æŒç”Ÿäº§å°±ç»ªçŠ¶æ€
  - `develop`: å¼€å‘åˆ†æ”¯ï¼Œé›†æˆæœ€æ–°åŠŸèƒ½
  - `feature/*`: åŠŸèƒ½åˆ†æ”¯ï¼Œç‹¬ç«‹å¼€å‘æ–°åŠŸèƒ½
  - `hotfix/*`: çƒ­ä¿®å¤åˆ†æ”¯ï¼Œç´§æ€¥ä¿®å¤ç”Ÿäº§é—®é¢˜
  ::

  ::stack{label="æäº¤è§„èŒƒ"}
  ```bash
  # æäº¤ä¿¡æ¯è§„èŒƒ (Conventional Commits)
  feat: æ–°åŠŸèƒ½
  fix: ä¿®å¤bug
  docs: æ–‡æ¡£æ›´æ–°
  style: ä»£ç æ ¼å¼ä¿®æ”¹
  refactor: ä»£ç é‡æ„
  test: æµ‹è¯•ç›¸å…³
  chore: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·å˜åŠ¨
  ```

  **æäº¤ä¿¡æ¯æ¨¡æ¿ï¼š**
  ```
  <type>(<scope>): <subject>

  <body>

  <footer>
  ```
  ::

  ::stack{label="SSHå¯†é’¥"}
  ```bash
  # ç”ŸæˆSSHå¯†é’¥
  ssh-keygen -t ed25519 -C "your.email@company.com"

  # å¯åŠ¨ssh-agent
  eval "$(ssh-agent -s)"

  # æ·»åŠ å¯†é’¥åˆ°ssh-agent
  ssh-add ~/.ssh/id_ed25519

  # å¤åˆ¶å…¬é’¥åˆ°å‰ªè´´æ¿
  cat ~/.ssh/id_ed25519.pub | pbcopy  # macOS
  cat ~/.ssh/id_ed25519.pub | xclip -selection clipboard  # Linux
  ```

  **SSHå¯†é’¥çš„ä¼˜åŠ¿ï¼š**
  - æ— éœ€æ¯æ¬¡è¾“å…¥å¯†ç 
  - æ›´åŠ å®‰å…¨å¯é 
  - æ”¯æŒå¯†é’¥è½®æ¢
  ::
::

## 4ã€é¡¹ç›®æ­å»ºæ­¥éª¤

### 4.1 é¡¹ç›®åˆå§‹åŒ–

:::steps
#### 1. é¡¹ç›®è„šæ‰‹æ¶

**ä»€ä¹ˆæ˜¯ `nuxi`ï¼Ÿ**
`nuxi` æ˜¯ Nuxt çš„å®˜æ–¹ CLI å·¥å…·ï¼Œç”¨äºå¿«é€Ÿåˆ›å»ºã€å¼€å‘å’Œæ„å»º Nuxt åº”ç”¨ã€‚

```bash
# åˆ›å»ºæ–°é¡¹ç›®
pnpm dlx nuxi@latest init enterprise-nuxt4-app
cd enterprise-nuxt4-app

# å®‰è£…ä¾èµ–
pnpm install
```

**å‘½ä»¤è§£æï¼š**
- `pnpm dlx`: ä¸‹è½½å¹¶æ‰§è¡ŒåŒ…ï¼Œç±»ä¼¼äº `npx`
- `nuxi@latest`: ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ Nuxt CLI
- `init`: åˆ›å»ºæ–°é¡¹ç›®çš„å‘½ä»¤
- `enterprise-nuxt4-app`: é¡¹ç›®åç§°

**åˆå§‹åŒ–è¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ**
1. ğŸ“ åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„
2. ğŸ“¦ ç”ŸæˆåŸºç¡€é…ç½®æ–‡ä»¶
3. ğŸ”§ è®¾ç½® TypeScript æ”¯æŒ
4. ğŸ¨ é…ç½®å¼€å‘æœåŠ¡å™¨
5. ğŸ“‹ åˆ›å»ºç¤ºä¾‹é¡µé¢

#### 2. ä¼ä¸šçº§é¡¹ç›®ç»“æ„

**ä¸ºä»€ä¹ˆéœ€è¦ Monorepo æ¶æ„ï¼Ÿ**
- **ä»£ç å…±äº«**: å¤šä¸ªåº”ç”¨å…±äº«ç»„ä»¶å’Œå·¥å…·
- **ç»Ÿä¸€ç®¡ç†**: ç»Ÿä¸€çš„ä¾èµ–ã€æ„å»ºå’Œéƒ¨ç½²æµç¨‹
- **å›¢é˜Ÿåä½œ**: æ›´å¥½çš„ä»£ç å¤ç”¨å’Œç»´æŠ¤
- **ç‰ˆæœ¬æ§åˆ¶**: ç»Ÿä¸€çš„ç‰ˆæœ¬ç®¡ç†å’Œå‘å¸ƒæµç¨‹

é‡æ–°ç»„ç»‡é¡¹ç›®ç»“æ„ä»¥æ”¯æŒä¼ä¸šçº§å¼€å‘ï¼š

```
enterprise-nuxt4-app/
â”œâ”€â”€ ğŸ“ .github/              # GitHub Actions CI/CD
â”œâ”€â”€ ğŸ“ .vscode/              # VS Code é…ç½®
â”œâ”€â”€ ğŸ“ apps/                 # åº”ç”¨å±‚
â”‚   â”œâ”€â”€ ğŸ“ web/              # ä¸»åº”ç”¨
â”‚   â””â”€â”€ ğŸ“ admin/            # ç®¡ç†åå°
â”œâ”€â”€ ğŸ“ packages/             # å…±äº«åŒ…
â”‚   â”œâ”€â”€ ğŸ“ ui/               # UIç»„ä»¶åº“
â”‚   â”œâ”€â”€ ğŸ“ utils/            # å·¥å…·åº“
â”‚   â””â”€â”€ ğŸ“ types/            # ç±»å‹å®šä¹‰
â”œâ”€â”€ ğŸ“ docs/                 # æ–‡æ¡£
â”œâ”€â”€ ğŸ“ tests/                # æµ‹è¯•
â”œâ”€â”€ ğŸ“ tools/                # æ„å»ºå·¥å…·
â”œâ”€â”€ ğŸ“„ pnpm-workspace.yaml   # å·¥ä½œç©ºé—´é…ç½®
â”œâ”€â”€ ğŸ“„ turbo.json           # Turborepoé…ç½®
â””â”€â”€ ğŸ“„ docker-compose.yml   # æœ¬åœ°å¼€å‘ç¯å¢ƒ
```

å•ä¸ªé¡¹ç›®çš„æ–‡ä»¶ç»“æ„è®¾è®¡ï¼š

```
src/
â”œâ”€â”€ ğŸ“ assets/               # é™æ€èµ„æº
â”‚   â”œâ”€â”€ ğŸ“ images/           # å›¾ç‰‡èµ„æº
â”‚   â”œâ”€â”€ ğŸ“ icons/            # å›¾æ ‡
â”‚   â””â”€â”€ ğŸ“ scss/             # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ ğŸ“ components/           # ç»„ä»¶
â”‚   â”œâ”€â”€ ğŸ“ base/             # åŸºç¡€ç»„ä»¶
â”‚   â”œâ”€â”€ ğŸ“ business/         # ä¸šåŠ¡ç»„ä»¶
â”‚   â”œâ”€â”€ ğŸ“ layout/           # å¸ƒå±€ç»„ä»¶
â”‚   â””â”€â”€ ğŸ“ form/             # è¡¨å•ç»„ä»¶
â”œâ”€â”€ ğŸ“ composables/          # ç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ ğŸ“ api/              # APIç›¸å…³
â”‚   â”œâ”€â”€ ğŸ“ auth/             # è®¤è¯ç›¸å…³
â”‚   â””â”€â”€ ğŸ“ utils/            # å·¥å…·å‡½æ•°
â”œâ”€â”€ ğŸ“ layouts/              # é¡µé¢å¸ƒå±€
â”œâ”€â”€ ğŸ“ middleware/           # ä¸­é—´ä»¶
â”œâ”€â”€ ğŸ“ pages/                # é¡µé¢
â”œâ”€â”€ ğŸ“ plugins/              # æ’ä»¶
â”œâ”€â”€ ğŸ“ server/               # æœåŠ¡ç«¯
â”‚   â”œâ”€â”€ ğŸ“ api/              # APIè·¯ç”±
â”‚   â”œâ”€â”€ ğŸ“ middleware/       # æœåŠ¡ç«¯ä¸­é—´ä»¶
â”‚   â””â”€â”€ ğŸ“ utils/            # æœåŠ¡ç«¯å·¥å…·
â”œâ”€â”€ ğŸ“ stores/               # çŠ¶æ€ç®¡ç†
â”œâ”€â”€ ğŸ“ types/                # ç±»å‹å®šä¹‰
â””â”€â”€ ğŸ“ utils/                # å·¥å…·å‡½æ•°
```

#### 3. å·¥ä½œç©ºé—´é…ç½®

**å·¥ä½œç©ºé—´é…ç½®çš„æ ¸å¿ƒæ¦‚å¿µï¼š**
- **Packageç®¡ç†**: å®šä¹‰å“ªäº›ç›®å½•åŒ…å«ç‹¬ç«‹çš„åŒ…
- **ä¾èµ–å…³ç³»**: ç®¡ç†åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»
- **æ„å»ºæµç¨‹**: å®šä¹‰æ„å»ºä»»åŠ¡çš„æ‰§è¡Œé¡ºåº
- **ç¼“å­˜ç­–ç•¥**: ä¼˜åŒ–æ„å»ºæ€§èƒ½

```yaml
# pnpm-workspace.yaml
packages:
  - 'apps/*' # åº”ç”¨ç¨‹åºç›®å½•
  - 'packages/*' # å…±äº«åŒ…ç›®å½•
  - 'tools/*' # æ„å»ºå·¥å…·ç›®å½•
```

**å·¥ä½œç©ºé—´çš„ä¼˜åŠ¿ï¼š**
1. **ç»Ÿä¸€ä¾èµ–**: æ‰€æœ‰åŒ…å…±äº«åŒä¸€ä¸ª `node_modules`
2. **ç‰ˆæœ¬ä¸€è‡´**: ç¡®ä¿æ‰€æœ‰åŒ…ä½¿ç”¨ç›¸åŒç‰ˆæœ¬çš„ä¾èµ–
3. **å¼€å‘æ•ˆç‡**: å¿«é€Ÿçš„åŒ…é—´é“¾æ¥å’Œçƒ­é‡è½½
4. **æ„å»ºä¼˜åŒ–**: å¢é‡æ„å»ºå’Œç¼“å­˜

```json
// turbo.json - Turborepo æ„å»ºé…ç½®
{
  "pipeline": {
    "build": {
      "dependsOn": ["^build"], // ä¾èµ–åŒ…å¿…é¡»å…ˆæ„å»º
      "outputs": [".next/**", "!.next/cache/**", "dist/**"] // æ„å»ºè¾“å‡º
    },
    "test": {
      "dependsOn": ["^build"], // æµ‹è¯•å‰éœ€è¦æ„å»º
      "outputs": []
    },
    "lint": {
      "outputs": [] // ä»£ç æ£€æŸ¥ä¸äº§ç”Ÿè¾“å‡ºæ–‡ä»¶
    },
    "dev": {
      "cache": false, // å¼€å‘æ¨¡å¼ä¸ç¼“å­˜
      "persistent": true // æŒç»­è¿è¡Œçš„ä»»åŠ¡
    }
  }
}
```

**Turborepo æ„å»ºæµç¨‹ï¼š**
```mermaid
graph TD
    A[ä»£ç å˜æ›´] --> B[æ£€æµ‹ä¾èµ–]
    B --> C[è®¡ç®—æ„å»ºé¡ºåº]
    C --> D[å¹¶è¡Œæ„å»º]
    D --> E[ç¼“å­˜ç»“æœ]
    E --> F[è¾“å‡ºåˆ°ç›®æ ‡]
```
:::

### 4.2 ä¾èµ–åŒ…ä»‹ç»

#### 4.2.1 åŸºç¡€æ¡†æ¶

```bash
# Nuxt4 æ ¸å¿ƒ
pnpm add nuxt@latest
pnpm add -D typescript @nuxt/typescript-build

# UIæ¡†æ¶
pnpm add @nuxtjs/tailwindcss
pnpm add @headlessui/vue @heroicons/vue
pnpm add @vueuse/nuxt @vueuse/core

# çŠ¶æ€ç®¡ç†
pnpm add pinia @pinia/nuxt
```

#### 4.2.2 ä¼ä¸šçº§å¢å¼º

```bash
# å›½é™…åŒ–
pnpm add @nuxtjs/i18n

# è¡¨å•å¤„ç†
pnpm add @vee-validate/nuxt vee-validate @vee-validate/yup yup

# HTTPå®¢æˆ·ç«¯
pnpm add @nuxtjs/axios @nuxtjs/proxy

# èº«ä»½éªŒè¯
pnpm add @nuxtjs/auth-next

# æ€§èƒ½ç›‘æ§
pnpm add @nuxtjs/google-analytics
pnpm add @sentry/nuxt
```

#### 4.2.3 å¼€å‘å·¥å…·

```bash
# ä»£ç è´¨é‡
pnpm add -D eslint @nuxt/eslint-config prettier
pnpm add -D @typescript-eslint/parser @typescript-eslint/eslint-plugin
pnpm add -D stylelint stylelint-config-standard-scss

# æµ‹è¯•æ¡†æ¶
pnpm add -D vitest @nuxt/test-utils @vue/test-utils
pnpm add -D playwright @playwright/test

# æ„å»ºå·¥å…·
pnpm add -D @nuxt/devtools
pnpm add -D cross-env dotenv-cli
```

### 4.3 é…ç½®æ–‡ä»¶è®¾ç½®

#### 4.3.1 Nuxt4 é…ç½®

**Nuxt4 é…ç½®æ–‡ä»¶çš„æ ¸å¿ƒä½œç”¨ï¼š**
- **åº”ç”¨é…ç½®**: å®šä¹‰åº”ç”¨çš„åŸºæœ¬è¡Œä¸ºå’Œç‰¹æ€§
- **æ¨¡å—ç®¡ç†**: é›†æˆç¬¬ä¸‰æ–¹æ¨¡å—å’Œæ’ä»¶
- **æ„å»ºä¼˜åŒ–**: é…ç½®æ„å»ºè¿‡ç¨‹å’Œæ€§èƒ½ä¼˜åŒ–
- **å¼€å‘ä½“éªŒ**: è®¾ç½®å¼€å‘å·¥å…·å’Œè°ƒè¯•åŠŸèƒ½

```typescript
// nuxt.config.ts
export default defineNuxtConfig({
  // åŸºç¡€é…ç½®
  ssr: true, // å¯ç”¨æœåŠ¡ç«¯æ¸²æŸ“ï¼Œæå‡SEOå’Œé¦–å±åŠ è½½é€Ÿåº¦
  typescript: {
    typeCheck: true, // æ„å»ºæ—¶è¿›è¡ŒTypeScriptç±»å‹æ£€æŸ¥
    strict: true // å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œæé«˜ç±»å‹å®‰å…¨æ€§
  },

  // æ¨¡å—é…ç½® - æŒ‰åŠŸèƒ½åˆ†ç»„
  modules: [
    '@nuxtjs/tailwindcss', // CSSæ¡†æ¶ï¼Œå¿«é€ŸUIå¼€å‘
    '@pinia/nuxt', // çŠ¶æ€ç®¡ç†ï¼Œæ›¿ä»£Vuex
    '@nuxtjs/i18n', // å›½é™…åŒ–æ”¯æŒ
    '@vee-validate/nuxt', // è¡¨å•éªŒè¯åº“
    '@nuxtjs/google-analytics', // æ•°æ®åˆ†æ
    '@sentry/nuxt/module' // é”™è¯¯ç›‘æ§
  ],

  // CSSé¢„å¤„ç†å™¨
  css: ['~/assets/scss/main.scss'], // å…¨å±€æ ·å¼å…¥å£

  // æ„å»ºé…ç½®
  build: {
    transpile: ['@headlessui/vue'] // éœ€è¦è½¬è¯‘çš„ç¬¬ä¸‰æ–¹åº“
  },

  // è¿è¡Œæ—¶é…ç½® - ç¯å¢ƒå˜é‡ç®¡ç†
  runtimeConfig: {
    // æœåŠ¡ç«¯ç¯å¢ƒå˜é‡ï¼ˆç§å¯†ä¿¡æ¯ï¼‰
    apiSecret: process.env.API_SECRET,

    // å…¬å…±ç¯å¢ƒå˜é‡ï¼ˆå®¢æˆ·ç«¯å¯è®¿é—®ï¼‰
    public: {
      apiBase: process.env.API_BASE_URL,
      googleAnalyticsId: process.env.GOOGLE_ANALYTICS_ID
    }
  },

  // æ€§èƒ½ä¼˜åŒ– - NitroæœåŠ¡å™¨é…ç½®
  nitro: {
    preset: 'node-server', // éƒ¨ç½²é¢„è®¾
    minify: true, // å‹ç¼©è¾“å‡º
    compressPublicAssets: true // å‹ç¼©é™æ€èµ„æº
  },

  // å¼€å‘å·¥å…·
  devtools: {
    enabled: true, // å¯ç”¨å¼€å‘è€…å·¥å…·
    timeline: {
      enabled: true // å¯ç”¨æ—¶é—´çº¿è°ƒè¯•
    }
  },

  // å®éªŒæ€§åŠŸèƒ½
  experimental: {
    payloadExtraction: false, // ç¦ç”¨payloadæå–ï¼ˆå‡å°‘åŒ…å¤§å°ï¼‰
    typedPages: true // å¯ç”¨é¡µé¢ç±»å‹æ¨æ–­
  }
});
```

**é…ç½®é¡¹è¯¦è§£ï¼š**

::tabs{variant="line"}
  ::stack{label="æ¸²æŸ“æ¨¡å¼"}
  ```typescript
  // æ¸²æŸ“æ¨¡å¼é€‰æ‹©
  export default defineNuxtConfig({
    ssr: true, // æœåŠ¡ç«¯æ¸²æŸ“ (SSR)
    // ssr: false, // å•é¡µåº”ç”¨ (SPA)

    // æ··åˆæ¸²æŸ“ç­–ç•¥
    routeRules: {
      '/': { prerender: true }, // é™æ€é¢„æ¸²æŸ“
      '/admin/**': { ssr: false }, // SPAæ¨¡å¼
      '/api/**': { cors: true }, // APIè·¯ç”±
      '/blog/**': { isr: 3600 } // å¢é‡é™æ€å†ç”Ÿ
    }
  });
  ```

  **æ¸²æŸ“æ¨¡å¼å¯¹æ¯”ï¼š**
  - **SSR**: æœåŠ¡ç«¯æ¸²æŸ“ï¼ŒSEOå‹å¥½ï¼Œé¦–å±å¿«
  - **SPA**: å•é¡µåº”ç”¨ï¼Œäº¤äº’æµç•…ï¼Œå®¢æˆ·ç«¯æ¸²æŸ“
  - **SSG**: é™æ€ç”Ÿæˆï¼Œæ€§èƒ½æœ€ä½³ï¼Œé€‚åˆé™æ€å†…å®¹
  - **ISR**: å¢é‡é™æ€å†ç”Ÿï¼Œç»“åˆé™æ€å’ŒåŠ¨æ€çš„ä¼˜åŠ¿
  ::

  ::stack{label="æ¨¡å—ç³»ç»Ÿ"}
  ```typescript
  // æ¨¡å—é…ç½®æœ€ä½³å®è·µ
  export default defineNuxtConfig({
    modules: [
      // UIå’Œæ ·å¼
      '@nuxtjs/tailwindcss',
      '@nuxtjs/color-mode',

      // åŠŸèƒ½æ¨¡å—
      '@pinia/nuxt',
      '@vueuse/nuxt',
      '@nuxtjs/i18n',

      // å¼€å‘å·¥å…·
      '@nuxt/devtools',

      // ç”Ÿäº§å·¥å…·
      '@nuxtjs/google-analytics',
      '@sentry/nuxt/module'
    ],

    // æ¨¡å—é€‰é¡¹
    tailwindcss: {
      configPath: '~/tailwind.config.js'
    },

    i18n: {
      locales: ['en', 'zh'],
      defaultLocale: 'zh'
    }
  });
  ```

  **æ¨¡å—åŠ è½½é¡ºåºå¾ˆé‡è¦ï¼š**
  1. åŸºç¡€æ¨¡å—ï¼ˆTailwind CSSï¼‰
  2. åŠŸèƒ½æ¨¡å—ï¼ˆPiniaã€VueUseï¼‰
  3. å¼€å‘å·¥å…·
  4. ç›‘æ§å·¥å…·
  ::

  ::stack{label="æ€§èƒ½ä¼˜åŒ–"}
  ```typescript
  // æ€§èƒ½ä¼˜åŒ–é…ç½®
  export default defineNuxtConfig({
    // æ„å»ºä¼˜åŒ–
    build: {
      transpile: ['@headlessui/vue'],
      rollupOptions: {
        output: {
          manualChunks: {
            'vue-vendor': ['vue', 'vue-router'],
            'ui-vendor': ['@headlessui/vue']
          }
        }
      }
    },

    // Nitroä¼˜åŒ–
    nitro: {
      minify: true,
      compressPublicAssets: true,
      storage: {
        redis: {
          driver: 'redis',
          /* redis config */
        }
      }
    },

    // å®éªŒæ€§ä¼˜åŒ–
    experimental: {
      payloadExtraction: false, // å‡å°‘åŒ…å¤§å°
      inlineSSRStyles: false // é¿å…å†…è”æ ·å¼é—ªçƒ
    }
  });
  ```
  ::
::

#### 4.3.2 TypeScript é…ç½®

```json
// tsconfig.json
{
  "extends": "./.nuxt/tsconfig.json",
  "compilerOptions": {
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedIndexedAccess": true,
    "exactOptionalPropertyTypes": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"],
      "~/*": ["./src/*"],
      "@@/*": ["./*"],
      "~~/*": ["./*"]
    }
  },
  "include": [
    "**/*.ts",
    "**/*.tsx",
    "**/*.vue"
  ],
  "exclude": [
    "node_modules",
    ".nuxt",
    "dist"
  ]
}
```

#### 4.3.3 ESLint é…ç½®

```javascript
// eslint.config.js
import { createConfigForNuxt } from '@nuxt/eslint-config/flat';

export default createConfigForNuxt({
  features: {
    typescript: true,
    stylistic: true
  }
}).append({
  rules: {
    // ä¼ä¸šçº§ä»£ç è§„èŒƒ
    'no-console': 'warn',
    'no-debugger': 'error',
    '@typescript-eslint/no-unused-vars': 'error',
    '@typescript-eslint/no-explicit-any': 'error',
    'vue/multi-word-component-names': 'error',
    'vue/component-name-in-template-casing': ['error', 'PascalCase'],
    'vue/no-v-html': 'error'
  }
});
```

### 4.4. æµ‹è¯•æ¡†æ¶é…ç½®

####  4.4.1 Vitest å•å…ƒæµ‹è¯•

```typescript
import { resolve } from 'node:path';
// vitest.config.ts
import { defineConfig } from 'vitest/config';

export default defineConfig({
  test: {
    environment: 'nuxt',
    globals: true,
    setupFiles: ['./tests/setup.ts'],
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      exclude: [
        'coverage/**',
        'dist/**',
        'packages/*/test?(s)/**',
        '**/*.d.ts',
        'cypress/**',
        'test?(s)/**',
        'test?(-*).?(c|m)[jt]s?(x)',
        '**/*{.,-}test.?(c|m)[jt]s?(x)',
        '**/*{.,-}spec.?(c|m)[jt]s?(x)',
        '**/__tests__/**',
        '**/{karma,rollup,webpack,vite,vitest,jest,ava,babel,nyc,cypress,tsup,build}.config.*',
        '**/.{eslint,mocha,prettier}rc.{js,cjs,yml}'
      ]
    }
  },
  resolve: {
    alias: {
      '@': resolve(__dirname, './src'),
      '~': resolve(__dirname, './src')
    }
  }
});
```

#### 4.4.2 Playwright E2Eæµ‹è¯•

```typescript
// playwright.config.ts
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  testDir: './tests/e2e',
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  reporter: 'html',

  use: {
    baseURL: 'http://localhost:3000',
    trace: 'on-first-retry',
    screenshot: 'only-on-failure'
  },

  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] }
    },
    {
      name: 'firefox',
      use: { ...devices['Desktop Firefox'] }
    },
    {
      name: 'webkit',
      use: { ...devices['Desktop Safari'] }
    }
  ],

  webServer: {
    command: 'pnpm run dev',
    url: 'http://localhost:3000',
    reuseExistingServer: !process.env.CI
  }
});
```

### 4.5 CI/CD é…ç½®

#### 4.5.1 GitHub Actions

```yaml
# .github/workflows/ci.yml
name: CI/CD Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [18.x, 20.x]

    steps:
      - uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ matrix.node-version }}
          cache: pnpm

      - name: Install pnpm
        uses: pnpm/action-setup@v2
        with:
          version: 8

      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      - name: Run linting
        run: pnpm run lint

      - name: Run type checking
        run: pnpm run typecheck

      - name: Run unit tests
        run: pnpm run test:unit

      - name: Run E2E tests
        run: pnpm run test:e2e

      - name: Build application
        run: pnpm run build

      - name: Upload coverage to Codecov
        uses: codecov/codecov-action@v3
        with:
          file: ./coverage/coverage-final.json

  deploy:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'

    steps:
      - uses: actions/checkout@v4

      - name: Deploy to production
        run: |
          echo "Deploying to production..."
          # éƒ¨ç½²è„šæœ¬
```

### 4.6 ç›‘æ§ä¸æ€§èƒ½

#### 4.6.1 æ€§èƒ½ç›‘æ§é…ç½®

```typescript
// plugins/monitoring.client.ts
export default defineNuxtPlugin(() => {
  // æ€§èƒ½ç›‘æ§
  if (process.client) {
    // Web Vitals
    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {
      getCLS(console.log);
      getFID(console.log);
      getFCP(console.log);
      getLCP(console.log);
      getTTFB(console.log);
    });

    // é”™è¯¯ç›‘æ§
    window.addEventListener('error', (event) => {
      console.error('Global error:', event.error);
      // å‘é€åˆ°ç›‘æ§ç³»ç»Ÿ
    });

    // æœªå¤„ç†çš„Promiseæ‹’ç»
    window.addEventListener('unhandledrejection', (event) => {
      console.error('Unhandled promise rejection:', event.reason);
      // å‘é€åˆ°ç›‘æ§ç³»ç»Ÿ
    });
  }
});
```

#### 4.6.2 Sentry é”™è¯¯è¿½è¸ª

```typescript
// nuxt.config.ts
export default defineNuxtConfig({
  modules: [
    '@sentry/nuxt/module'
  ],

  sentry: {
    dsn: process.env.SENTRY_DSN,
    environment: process.env.NODE_ENV,
    tracesSampleRate: 1.0,
    integrations: [
      // æ€§èƒ½ç›‘æ§
      // é”™è¯¯è¾¹ç•Œ
      // ç”¨æˆ·åé¦ˆ
    ]
  }
});
```

### 4.7 Docker é…ç½®

#### 4.7.1 å¼€å‘ç¯å¢ƒ

```dockerfile
# Dockerfile.dev
FROM node:20-alpine

WORKDIR /app

# å®‰è£…pnpm
RUN npm install -g pnpm

# å¤åˆ¶packageæ–‡ä»¶
COPY package*.json pnpm-lock.yaml ./

# å®‰è£…ä¾èµ–
RUN pnpm install

# å¤åˆ¶æºä»£ç 
COPY . .

# æš´éœ²ç«¯å£
EXPOSE 3000

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
CMD ["pnpm", "run", "dev", "--host", "0.0.0.0"]
```

### ç”Ÿäº§ç¯å¢ƒ

```dockerfile
# Dockerfile.prod
FROM node:20-alpine AS builder

WORKDIR /app

# å®‰è£…pnpm
RUN npm install -g pnpm

# å¤åˆ¶packageæ–‡ä»¶
COPY package*.json pnpm-lock.yaml ./

# å®‰è£…ä¾èµ–
RUN pnpm install --frozen-lockfile

# å¤åˆ¶æºä»£ç 
COPY . .

# æ„å»ºåº”ç”¨
RUN pnpm run build

# ç”Ÿäº§é•œåƒ
FROM node:20-alpine AS runner

WORKDIR /app

# åˆ›å»ºérootç”¨æˆ·
RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nuxtjs

# å¤åˆ¶æ„å»ºäº§ç‰©
COPY --from=builder --chown=nuxtjs:nodejs /app/.output ./

USER nuxtjs

EXPOSE 3000

ENV NODE_ENV=production

CMD ["node", "server/index.mjs"]
```

### 4.8 å®‰å…¨é…ç½®

#### 4.8.1 ç¯å¢ƒå˜é‡ç®¡ç†

```bash
# .env.example
# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://user:password@localhost:5432/database

# APIé…ç½®
API_BASE_URL=https://api.example.com
API_SECRET=your-api-secret

# è®¤è¯é…ç½®
JWT_SECRET=your-jwt-secret
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your-nextauth-secret

# ç¬¬ä¸‰æ–¹æœåŠ¡
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# ç›‘æ§é…ç½®
SENTRY_DSN=your-sentry-dsn
GOOGLE_ANALYTICS_ID=your-ga-id
```

### 4.9 ä¸­é—´ä»¶

```typescript
// middleware/security.global.ts
export default defineNuxtRouteMiddleware((to, from) => {
  // CSPé…ç½®
  if (process.server) {
    const event = useRequestEvent();
    setResponseHeader(event, 'Content-Security-Policy', [
      'default-src \'self\'',
      'script-src \'self\' \'unsafe-inline\' \'unsafe-eval\'',
      'style-src \'self\' \'unsafe-inline\'',
      'img-src \'self\' data: https:',
      'font-src \'self\' data:',
      'connect-src \'self\' https://api.example.com'
    ].join('; '));
  }
});
```

## 5ã€å¼€å‘æµç¨‹

### 5.1 ä»£ç æäº¤è§„èŒƒ

```json
// .commitlintrc.json
{
  "extends": ["@commitlint/config-conventional"],
  "rules": {
    "type-enum": [
      2,
      "always",
      [
        "feat",
        "fix",
        "docs",
        "style",
        "refactor",
        "perf",
        "test",
        "build",
        "ci",
        "chore",
        "revert"
      ]
    ],
    "subject-case": [2, "never", ["sentence-case", "start-case", "pascal-case", "upper-case"]],
    "subject-empty": [2, "never"],
    "subject-full-stop": [2, "never", "."],
    "header-max-length": [2, "always", 72]
  }
}
```

### 5.2 Git Hooks

```bash
# .husky/pre-commit
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# è¿è¡Œlintæ£€æŸ¥
pnpm run lint

# è¿è¡Œç±»å‹æ£€æŸ¥
pnpm run typecheck

# è¿è¡Œå•å…ƒæµ‹è¯•
pnpm run test:unit
```

## 6ã€æ€§èƒ½ä¼˜åŒ–

### 6.1 æ„å»ºä¼˜åŒ–

```typescript
// nuxt.config.ts
export default defineNuxtConfig({
  // æ„å»ºä¼˜åŒ–
  build: {
    transpile: ['@headlessui/vue'],
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['vue', 'vue-router'],
          ui: ['@headlessui/vue', '@heroicons/vue']
        }
      }
    }
  },

  // èµ„æºä¼˜åŒ–
  image: {
    provider: 'cloudinary',
    cloudinary: {
      baseURL: 'https://res.cloudinary.com/your-cloud-name/image/upload/'
    }
  },

  // ç¼“å­˜ç­–ç•¥
  routeRules: {
    // é™æ€é¡µé¢é¢„æ¸²æŸ“
    '/': { prerender: true },
    '/about': { prerender: true },

    // APIç¼“å­˜
    '/api/**': { cors: true, headers: { 'cache-control': 's-maxage=60' } },

    // åŠ¨æ€é¡µé¢ISR
    '/blog/**': { isr: 3600 },

    // SPAæ¨¡å¼
    '/admin/**': { ssr: false }
  }
});
```

## 7ã€éƒ¨ç½²é…ç½®

### 7.1 ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

```yaml
# docker-compose.prod.yml
version: '3.8'

services:
  app:
    build:
      context: .
      dockerfile: Dockerfile.prod
    ports:
      - '3000:3000'
    environment:
      - NODE_ENV=production
      - DATABASE_URL=${DATABASE_URL}
    depends_on:
      - db
      - redis
    restart: unless-stopped

  db:
    image: postgres:15-alpine
    environment:
      - POSTGRES_DB=${DB_NAME}
      - POSTGRES_USER=${DB_USER}
      - POSTGRES_PASSWORD=${DB_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    restart: unless-stopped

  redis:
    image: redis:7-alpine
    restart: unless-stopped

volumes:
  postgres_data:
```

## 8ã€å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### Q1: é¡¹ç›®å¯åŠ¨å¤±è´¥

**é—®é¢˜**: è¿è¡Œ `pnpm dev` æ—¶æŠ¥é”™

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ¸…é™¤ç¼“å­˜
rm -rf .nuxt .output node_modules

# é‡æ–°å®‰è£…ä¾èµ–
pnpm install

# é‡æ–°å¯åŠ¨
pnpm dev
```

### Q2: TypeScript ç±»å‹é”™è¯¯

**é—®é¢˜**: ç±»å‹æ£€æŸ¥å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ç”Ÿæˆç±»å‹æ–‡ä»¶
pnpm nuxt prepare

# é‡æ–°æ£€æŸ¥ç±»å‹
pnpm nuxt typecheck
```

### Q3: æ„å»ºå¤±è´¥

**é—®é¢˜**: ç”Ÿäº§æ„å»ºæŠ¥é”™

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•
pnpm nuxt info

# æ¸…é™¤ç¼“å­˜é‡æ–°æ„å»º
rm -rf .nuxt .output
pnpm build
```

## ğŸ¯ æ€»ç»“

### ä¼ä¸šçº§ç‰¹æ€§æ¸…å•

::card-group{cols=2}
  ::::card{icon="lucide:shield-check"}
  #title
  **å®‰å…¨æ€§**
  #description
  - âœ… ç±»å‹å®‰å…¨ (TypeScript)
  - âœ… è¾“å…¥éªŒè¯ (Yup)
  - âœ… å®‰å…¨ä¸­é—´ä»¶
  - âœ… ç¯å¢ƒå˜é‡ç®¡ç†
  ::::

  ::::card{icon="lucide:users"}
  #title
  **å›¢é˜Ÿåä½œ**
  #description
  - âœ… ç»Ÿä¸€ä»£ç è§„èŒƒ
  - âœ… è‡ªåŠ¨åŒ–æµ‹è¯•
  - âœ… ä»£ç å®¡æŸ¥æµç¨‹
  - âœ… æ–‡æ¡£ç”Ÿæˆ
  ::::

  ::::card{icon="lucide:zap"}
  #title
  **æ€§èƒ½ä¼˜åŒ–**
  #description
  - âœ… æ„å»ºä¼˜åŒ–
  - âœ… ç¼“å­˜ç­–ç•¥
  - âœ… å›¾ç‰‡ä¼˜åŒ–
  - âœ… æ€§èƒ½ç›‘æ§
  ::::

  ::::card{icon="lucide:deployment"}
  #title
  **éƒ¨ç½²è¿ç»´**
  #description
  - âœ… å®¹å™¨åŒ–éƒ¨ç½²
  - âœ… CI/CDæµæ°´çº¿
  - âœ… å¥åº·æ£€æŸ¥
  - âœ… æ—¥å¿—ç›‘æ§
  ::::
::

